var bjs;if(Object.defineProperty(Object.prototype,"getProperty",{value(t){if(""===t)return this;let e,s=this,r=t.toString().split("."),i=r.length;for(e=0;e<i;e++){if(void 0===s[r[e]])return;s=s[r[e]]}return s}}),Object.defineProperty(Object.prototype,"setProperty",{value(t,e){let s,r=this,i=t.toString().split("."),a=i.length;for(s=0;s<a-1;s++)void 0===r[i[s]]&&(r[i[s]]={}),r=r[i[s]];r[i[a-1]]=e}}),(bjs=(t=>new bjs.Selector(t))).attributes={},bjs.models=[],bjs.routers=[],bjs.strings=[],bjs.pipes={empty:t=>void 0===t[0]||null===t[0]?t[1]?t[1]:"":t[2]?t[2]:"",if(t){var e=parseFloat(t[0]);return isNaN(e)||(t[0]=e),t[0]?t[1]?t[1]:"":t[2]?t[2]:""},sort(t){if(void 0===t[0]||null===t[0])return"";let e=t[0]instanceof Array?t[0].slice():t[0].keys;return void 0===e?"":e.sort()},reverse(t){let e=bjs.pipes.sort(t);return e?e.reverse():""},min(t){let e=bjs.pipes.sort(t);return e?e[0]:""},max(t){let e=bjs.pipes.reverse(t);return e?e[0]:""}},bjs._attributes=[],bjs.__proto__.getAttributes=(()=>{if(bjs._attributes.length!==Object.keys(bjs.attributes).length){let t=[];for(let e in bjs.attributes)t.push({name:e,priority:bjs.attributes[e].priority});t.sort((t,e)=>t.priority>e.priority?-1:t.priority<e.priority?1:0),bjs._attributes=t}return bjs._attributes}),bjs.__proto__.getModel=function(t){for(var e in this.models)if(this.models[e].selector.contains(t))return this.models[e]},bjs.__proto__.getRouter=function(t){for(var e in this.routers)if(this.routers[e].selector.contains(t))return this.routers[e]},bjs.__proto__.getStringIndex=(t=>{var e=bjs.strings.indexOf(t);return-1===e&&(bjs.strings.push(t),e=bjs.strings.indexOf(t)),e}),bjs.__proto__.route=(()=>{for(let t in bjs.routers)bjs.routers[t].handle(location.href)}),void 0===b)var b=bjs;if(void 0===$)var $=bjs;window.addEventListener("popstate",bjs.route),bjs.Expression=class{constructor(t){this.expression=t,this.tree=this.parse(t.trim())}eval(t,e,s){let r,i,a;switch(void 0===e&&(e=this.tree),typeof e){case"string":r=s?e:t.get(e);break;case"number":r=e;break;default:switch(e.type){case"+":case"-":case"*":case"/":for(let s in e.params)void 0!==(i=this.eval(t,e.params[s]))&&null!==i&&(void 0!==r&&"number"!=typeof r||"number"==typeof i||(a=parseFloat(i),isNaN(a)||(i=a)),r=void 0===r?i:bjs.Expression.operations[e.type].func(r,i));break;case"&":case"?":case"=":case"#":r=[];for(let s in e.params)i=this.eval(t,e.params[s]),a=parseFloat(i),isNaN(a)||(i=a),r.push(i),r.length>1&&(r=[bjs.Expression.operations[e.type].func(r[0],r[1])]);r=r[0];break;case"value":r=this[s?"property":"eval"](t,e.params[0]);break;case"property":r=s?void 0!==(r=this.property(t,e.params[0]))?r+"."+e.params[1]:void 0:void 0!==(r=this.eval(t,e.params[0]))?r.getProperty(e.params[1]):void 0;break;case"index":r=e.params[0]+"."+this.eval(t,e.params[1]),s||(r=t.get(r));break;case"pipe":let n=[];for(let s in e.params)n.push(this.eval(t,e.params[s]));r=bjs.pipes[e.name](n)}}return r}property(t,e){return this.eval(t,e,!0)}getLinks(t){void 0===t&&(t=this.tree);let e,s=[];switch(typeof t){case"number":break;case"string":t.endsWith(".length")&&(t=t.substr(0,t.length-7)),t.endsWith(".keys")&&(t=t.substr(0,t.length-5)),s.push(t);break;default:switch(t.type){case"property":s.push(...this.getLinks(t.params[0]));break;default:for(e in t.params)s.push(...this.getLinks(t.params[e]))}}return s}parse(t){return t=this.parse_unclosed(t),t=this.parse_strings(t),t=this.parse_operations(t),this.expression=t,t=this.parse_tokens(t),this.parse_tree(t)}parse_unclosed(t){let e,s,r=0,i="",a=/{{.*?}}/gm,n=new RegExp(["=","!=","!","&&","\\|\\|","-","\\+","\\*","\\/","\\[","]","\\(","\\)","\\|",":"].join("|"));for(s=a.exec(t);s;)s.index!==r&&(e=t.substr(r,s.index-r),i+="strings."+bjs.getStringIndex(e)+" + ",r=s.index),e=s[0].substr(2,s[0].length-4).trim(),n.test(e)&&(e="("+e+")"),i+=e+" + ",r+=s[0].length,s=a.exec(t);return(e=t.substr(r)).length&&(i+="strings."+bjs.getStringIndex(e)),i.endsWith(" + ")&&(i=i.substr(0,i.length-3)),i.startsWith("(")&&i.endsWith(")")&&!i.match(/^\(.*(\(|\)).*\)$/)&&(i=i.substr(1,i.length-2)),i}parse_strings(t){let e="",s=0,r={start:0},i=/['"]/gm,a=i.exec(t);for(;a;)r.start?r.delim===a[0]&&(r.string=t.substr(r.start,a.index-r.start),r.index=bjs.getStringIndex(r.string),e+="strings."+r.index,r.start=0):(r.start=a.index+1,r.delim=a[0],e+=t.substr(s,a.index-s)),s=a.index+1,a=i.exec(t);return s<t.length&&(e+=t.substr(s)),e}parse_operations(t){return t=(t=(t=(t=t.replace(/&&/g,"&")).replace(/\|\|/g,"?")).replace(/==/g,"=")).replace(/!=/g,"#")}parse_tokens(t){let e,s,r=0,i=/[!&?=#\-+*/[\]()|:]/gm,a=[];for(r=0,i.lastIndex=0,s=i.exec(t);s;)s.index!==r&&((e=t.substr(r,s.index-r).trim()).length&&a.push(t.substr(r,s.index-r).trim()),r=s.index),a.push(s[0].trim()),r+=s[0].length,s=i.exec(t);return(e=t.substr(r).trim()).length&&a.push(e),a}parse_tree(t,e){let s,r;for(void 0===e&&(e={}),void 0===e.params&&(e.params=[]);t.length;)switch(s=t.shift()){case"-":case"+":case"*":case"/":case"&":case"?":case"=":case"#":if(void 0===e.type){e.type=s;continue}if(e.type===s)break;bjs.Expression.operations[e.type].priority==bjs.Expression.operations[s].priority&&e.params.push({type:s,params:[e.params.pop(),this.parse_tree(t)]}),bjs.Expression.operations[e.type].priority>bjs.Expression.operations[s].priority&&(e={type:s,params:[e]}),bjs.Expression.operations[e.type].priority<bjs.Expression.operations[s].priority&&e.params.push(this.parse_tree(t,{type:s,params:[e.params.pop()]}));break;case"(":e.params.push(this.parse_tree(t));break;case")":return void 0===e.type&&(e.type="value"),e;case"[":e.params.push({type:"index",params:[e.params.pop(),this.parse_tree(t)]});break;case"]":return void 0===e.type&&(e.type="value"),e;case"|":for(void 0!==e.type&&(e={params:[e]}),e.type="pipe",e.name=t.shift(),s=t.shift();":"===s;)e.params.push(this.parse_tree(t)),s=t.shift();void 0!==s&&t.unshift(s);break;case":":return t.unshift(s),e.params.length?(void 0===e.type&&(e.type="value"),e):"";default:"."==s[0]?(s=s.substr(1),void 0===e.type?(e.type="property",e.params.push(s)):e.params.push({type:"property",params:[e.params.pop(),s]})):(r=parseFloat(s),isNaN(r)||(s=r),e.params.push(s))}return void 0===e.type&&(e.type="value"),e}},bjs.Expression.operations={"+":{priority:0,func:(t,e)=>t+e},"-":{priority:0,func:(t,e)=>t-e},"*":{priority:1,func:(t,e)=>t*e},"/":{priority:1,func:(t,e)=>t/e},"&":{priority:2,func:(t,e)=>Boolean(t&&e)},"?":{priority:2,func:(t,e)=>Boolean(t||e)},"=":{priority:3,func:(t,e)=>Boolean(t==e)},"#":{priority:3,func:(t,e)=>Boolean(t!=e)},property:{priority:4},pipe:{priority:5}},bjs.Attribute=class extends bjs.Expression{constructor(t,e,s){super(t.attributes[e].value),this.name=e,this.node=t,this.model=s}apply(){let t=this.eval(this.model);t=void 0!==t?t.toString():"",this.node.getAttribute(this.name)!==t&&this.node.setAttribute(this.name,t)}},bjs.Attribute.priority=0,bjs.Attribute.check=((t,e)=>{let s=t.getAttribute(e).trim();return s.startsWith("{{")?s:"{{"+s+"}}"}),bjs.App=class{constructor(t,e,s){s={router:!0,clean:!0,...s},this.model=new bjs.Model(t,e,{init:!1}),s.clean&&this.clean(),s.router&&(this.router=new bjs.Router(this.model.selector))}get data(){return this.model.data}route(t,e,s){this.router&&(e?this.router.add(t,e,s):this.router.remove(t))}run(){this.model.init(),this.router&&this.router.trigger()}clean(){let t,e=[],s=document.createTreeWalker(document,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT,null,!1);for(;t=s.nextNode();)switch(t.nodeType){case Node.TEXT_NODE:t.nodeValue.match(/[^\s\n]/m)||e.push(t);break;case Node.COMMENT_NODE:e.push(t)}for(t in e)e[t].remove()}},bjs.AttributeBase=class extends bjs.Attribute{constructor(t,e,s){let r=t.attributes[e],i=r.value.match(/^{{(.*?)(\s+as\s+([a-z0-9_]+))}}$/im);r.value="{{"+i[1]+"}}",super(t,e,s),this.alias=i[3],this.apply()}apply(){let t,e,s=this.node.childNodes,r=this.property(this.model);for(t=0;t<s.length;t++)e=s[t],this.dealias(e,this.alias,r)}dealias(t,e,s){let r,i=new RegExp("(^|[^a-z])"+e.replace(/\./g,"\\.")+"([^a-z]|$)","gim");if(t instanceof Text)return t.b_base?r=t.b_base.replace(i,"$1"+s+"$2"):t.nodeValue.match(i)?(t.b_base=t.nodeValue,r=t.nodeValue.replace(i,"$1"+s+"$2")):r=t.nodeValue,void(t.nodeValue!==r&&(t.nodeValue=r,this.model.parseAttributes(t),this.model.applyAttributes(t)));t.b_base=t.b_base||{};let a,n,o=t.attributes;for(a=0;a<o.length;a++)n=o[a],r=bjs.attributes[n.name]?bjs.attributes[n.name].check(t,n.name):n.value,t.b_base[n.name]?r=t.b_base[n.name].replace(i,"$1"+s+"$2"):r.match(i)&&(t.b_base[n.name]=r,r=r.replace(i,"$1"+s+"$2")),n.value!==r&&(n.value=r,this.model.parseAttribute(t,n.name),this.model.applyAttribute(t,n.name));for(Object.keys(t.b_base).length||delete t.b_base,o=t.childNodes,a=0;a<o.length;a++)(n=o[a])instanceof Comment||n instanceof HTMLBRElement||n instanceof HTMLScriptElement||this.dealias(n,e,s)}},bjs.attributes["b-base"]=bjs.AttributeBase,bjs.AttributeFor=class extends bjs.Attribute{constructor(t,e,s){let r=t.attributes[e],i=r.value.match(/^{{([a-z0-9_]+)\s+in\s+(.*?)(\s+key\s+([a-z0-9_]+))?}}$/im);r.value="{{"+i[2]+"}}",super(t,e,s),this.alias=i[1],this.key=i[4],this.template=t.children[0],t.innerHTML=""}apply(){let t,e,s,r=[],i=this.property(this.model),a=this.eval(this.model);for(t in a)e=void 0!==this.key?a[t][this.key]:t,(s=this.node.querySelector('[b-key="'+e+'"]'))&&s.b_index!==t&&(s.remove(),s=null),s||((s=this.template.cloneNode(!0)).b_index=t,s.setAttribute("b-key",e),this.dealias(s,"\\$index",t),this.dealias(s,"\\$key",e),this.dealias(s,this.alias,i+"."+t),this.node.appendChild(s),this.model.parseNode(s));for(t=0;t<this.node.childNodes.length;t++)s=this.node.childNodes[t],void 0!==a&&void 0!==a[s.b_index]||r.push(s);for(t in r)this.model.unlink(r[t]),r[t].remove()}dealias(t,e,s){let r=new RegExp("(^|[^a-z])"+e.replace(/\./g,"\\.")+"([^a-z]|$)","gim");if(t instanceof Text)return void(t.nodeValue.match(r)&&(t.nodeValue=t.nodeValue.replace(r,"$1"+s+"$2")));let i,a,n=t.attributes;for(i=0;i<n.length;i++)(a=n[i]).value.match(r)&&(a.value=a.value.replace(r,"$1"+s+"$2"));for(n=t.childNodes,i=0;i<n.length;i++)(a=n[i])instanceof Comment||a instanceof HTMLBRElement||a instanceof HTMLScriptElement||this.dealias(a,e,s)}},bjs.AttributeFor.priority=99,bjs.attributes["b-for"]=bjs.AttributeFor,bjs.AttributeHideShow=class extends bjs.Attribute{constructor(t,e,s){super(t,e,s),this.type=e}apply(){"b-hide"==this.type&&!this.eval(this.model)||"b-show"==this.type&&this.eval(this.model)?this.node.style.display="":this.node.style.display="none"}},bjs.attributes["b-hide"]=bjs.AttributeHideShow,bjs.attributes["b-show"]=bjs.AttributeHideShow,bjs.AttributeModel=class extends bjs.Attribute{constructor(t,e,s){super(t,e,s)}apply(){let t=this.eval(this.model);t=void 0!==t?"object"!=typeof t?t.toString():JSON.stringify(t):"",this.node instanceof HTMLInputElement||this.node instanceof HTMLButtonElement||this.node instanceof HTMLTextAreaElement||this.node instanceof HTMLSelectElement?this.node.value!=t&&(this.node.value=t):this.node.textContent!=t&&(this.node.textContent=t)}get(){let t=this.eval(this.model);return void 0!==t?t:""}set(t){this.model.set(this.property(this.model),t)}},bjs.attributes["b-model"]=bjs.AttributeModel,bjs.Model=class{constructor(t,e,s){s={init:!0,...s},bjs.models.push(this),this.proxyHandler=new bjs.ModelProxyHandler(this),this.shadow={...e,strings:bjs.strings},this.proxy=new Proxy({$:""},this.proxyHandler),this.listeners={get:{},set:{},delete:{}},this.links={},this.selector=new bjs.Selector(t),s.init&&this.init()}get data(){return this.proxy}set data(t){t.strings=bjs.strings,this.shadow=t;for(let t in this.selector)this.parseNode(this.selector.get(t),"")}get(t){return this.data.getProperty(t)}set(t,e){this.data.setProperty(t,e)}init(){let t,e;for(t in this.selector)(e=this.selector.get(t)).addEventListener("input",bjs.Model.eventHander,!0),this.parseNode(e)}addListener(t,e,s){this.listeners[t]&&(this.listeners[t][e]||(this.listeners[t][e]=new Set),this.listeners[t][e].add(s))}removeListener(t,e,s){this.listeners[t]&&this.listeners[t][e]&&(this.listeners[t][e].delete(s),this.listeners[t][e].size||delete this.listeners[t][e])}applyAttributes(t){if(void 0===t.b_attributes)return;if(t instanceof Text){let e=t.b_attributes[""].eval(this);return e=void 0!==e?e.toString():"",void(t.nodeValue!==e&&(t.nodeValue=e))}let e;for(e in t.b_attributes)this.applyAttribute(t,e)}applyAttribute(t,e){void 0!==t.b_attributes&&void 0!==t.b_attributes[e]&&t.b_attributes[e].apply()}getNodes(t){let e,s,r=new Set;for(e in this.links)if(e.startsWith(t+"."))for(s of this.links[e])r.add(s);for(;""!=t;){if(void 0!==this.links[t])for(s of this.links[t])r.add(s);t=t.split(".").slice(0,-1).join(".")}return r}parseNode(t){if(this.parseAttributes(t),t instanceof Text)return void this.applyAttributes(t);let e,s,r=t.childNodes;for(e=0;e<r.length;e++)(s=r[e])instanceof Comment||s instanceof HTMLBRElement||s instanceof HTMLScriptElement||this.parseNode(s);this.applyAttributes(t)}parseAttributes(t){if(t instanceof Text)return void(-1!==t.nodeValue.indexOf("{{")?(t.b_attributes={"":new bjs.Expression(t.nodeValue)},this.updateLinks(t)):void 0===t.b_attributes&&delete t.b_attributes);let e,s,r=bjs.getAttributes();for(e in r)this.parseAttribute(t,r[e].name);for(e=0;e<t.attributes.length;e++)s=t.attributes[e],void 0===bjs.attributes[s.name]&&this.parseAttribute(t,s.name);t.b_attributes&&this.updateLinks(t)}parseAttribute(t,e){let s,r=t.attributes[e];if(r){if(t.b_attributes&&t.b_attributes[e]){if("{{"+t.b_attributes[e].expression+"}}"===r.value)return}if(bjs.attributes[e])s=bjs.attributes[e].check(t,e),r.value!==s&&(r.value=s),r=new bjs.attributes[e](t,e,this);else{if(-1===r.value.indexOf("{{"))return;void 0===bjs.attributes[e]&&(r=new bjs.Attribute(t,e,this))}void 0===t.b_attributes&&(t.b_attributes={}),t.b_attributes[e]=r}else t.b_attributes&&delete t.b_attributes[e]}updateLinks(t){var e,s,r,i=new Set;for(e in t.b_attributes)for(s in r=t.b_attributes[e].getLinks())i.add(r[s]);for(e of r=t.b_links||new Set)i.has(e)||this.unlink(t,e);for(e of i)r.has(e)||this.link(t,e)}link(t,e){void 0===this.links[e]&&(this.links[e]=new Set),this.links[e].add(t),void 0===t.b_links&&(t.b_links=new Set),t.b_links.add(e)}unlink(t,e){if(void 0===e){if(void 0!==t.b_links)for(let e of t.b_links)this.unlink(t,e);let e,s=t.childNodes;for(e=0;e<s.length;e++)this.unlink(s[e])}else void 0!==this.links[e]&&(this.links[e].delete(t),0===this.links[e].size&&delete this.links[e]),void 0!==t.b_links&&(t.b_links.delete(e),0===t.b_links.size&&delete t.b_links)}},bjs.Model.eventHander=(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLButtonElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement))return;if(void 0===t.target.b_attributes||void 0===t.target.b_attributes["b-model"])return;let e=t.target.b_attributes["b-model"],s=e.get(),r=t.target.value;s!==r&&e.set(r)}),bjs.ModelProxyHandler=class{constructor(t){this.model=t}deleteProperty(t,e){let s=this.model.shadow.getProperty(t.$),r=this.model.listeners.delete[t.$];if(r)for(let i of r)i(s,t.$,e);delete s[e];let i,a=(t.$?t.$+".":"")+e,n=this.model.getNodes(a);for(i of n)this.model.applyAttributes(i,a);return!0}get(t,e){if("constructor"===e)return{name:"Proxy"};let s=this.model.shadow.getProperty(t.$);switch(e){case"keys":return Object.keys(s);case"length":return Object.keys(s).length;case"toJSON":return()=>s;case"clone":return()=>({...s})}let r=this.model.listeners.get[t.$];if(r)for(let i of r)i(s,t.$,e);if(void 0!==s[e]&&null!==s[e])switch(typeof s[e]){case"object":return new Proxy({$:(t.$?t.$+".":"")+e},this.model.proxyHandler);default:return s[e]}}getPrototypeOf(t){return this.model.shadow.getProperty(t.$)}has(t,e){let s=this.model.shadow.getProperty(t.$);return Reflect.has(s,e)}isExtensible(t){let e=this.model.shadow.getProperty(t.$);return Reflect.isExtensible(e)}ownKeys(t){let e=this.model.shadow.getProperty(t.$);return Object.keys(e)}set(t,e,s){let r=this.model.shadow.getProperty(t.$),i=this.model.listeners.set[t.$];if("Proxy"===s.constructor.name&&(s=s.clone()),i)for(let a of i)a(r,t.$,e,s);if(r[e]!==s){r[e]=s;let i,a=(t.$?t.$+".":"")+e,n=this.model.getNodes(a);for(i of n)this.model.applyAttributes(i,a)}return!0}},bjs.Resource=class{constructor(t,e){this.url=t,this.type=e||"json"}get(t){return this.method("get",t)}post(t){return this.method("post",t)}put(t){return this.method("put",t)}delete(t){return this.method("delete",t)}method(t,e,s){"Proxy"===(e=e||{}).constructor.name&&(e=e.clone());let r=this.url.replace(/\/:([-_0-9a-z]+)(\/|$)/gi,(t,s,r)=>{let i=e[s]||"";return delete e[s],"/"+i+r}),i={mode:"cors",method:t,headers:new Headers(s||bjs.Resource.headers)};switch(t){case"get":case"delete":let s,a=[];for(s in e)a.push(s+"="+encodeURIComponent(e[s]));r+="?"+a.join("&");break;case"post":case"put":i.body=JSON.stringify(e)}return-1!==["post","put"].indexOf(t)&&(i.body=JSON.stringify(e)),fetch(r,i).then(t=>{switch(this.ok=t.ok,this.status=t.status,this.type){case"json":return t.json();case"form":return t.formData();default:return t.text()}}).then(t=>{if(!this.ok){let e=new Error;throw e.status=this.status,e.data=t,e}return t})}},bjs.Resource.headers={},bjs.Router=class{constructor(t){bjs.routers.push(this),this.routes={},this.selector=t,this.init()}init(){let t,e;for(t in this.selector)(e=this.selector.get(t)).addEventListener("click",bjs.Router.eventHander,!0)}add(t,e,s){t=this.normalize(t),this.routes[t]={parts:t.split("/"),callback:e,params:s||{}}}remove(t){t=this.normalize(t),delete this.routes[t]}trigger(t,e){void 0===t&&(t=location.pathname),this.handle(t,e)}handle(t,e){if(t=this.normalize(t),void 0!==this.routes[t])return e&&window.history.pushState({},"","/"+t),this.routes[t].callback(this.routes[t].params),!0;let s,r,i,a,n=Object.assign({},this.routes),o={},l=t.split("/");for(s in l)for(r in a=l[s],n)n[r].parts.length===l.length?(i=n[r].parts[s])!==a&&(void 0!==i&&":"===i[0]?o[i.substr(1)]=a:delete n[r]):delete n[r];if(Object.keys(n).length)for(r in e&&window.history.pushState({},"","/"+t),n)n[r].callback(Object.assign(n[r].params,o));return Object.keys(n).length>0}normalize(t){return t.startsWith(location.origin)&&(t=t.substr(location.origin.length)),t.startsWith("//"+location.host)&&(t=t.substr(("//"+location.host).length)),t.startsWith("/")&&(t=t.substr(1)),t.endsWith("/")&&(t=t.substr(0,t.length-1)),t}},bjs.Router.eventHander=(t=>{let e=t.target;for(;!(e instanceof HTMLAnchorElement);)if((e=e.parentNode)instanceof HTMLDocument)return;let s=bjs.getRouter(e);if(!s)return;let r=e.getAttribute("href");r&&s.handle(r,!0)&&t.preventDefault()}),bjs.Selector=class extends Array{constructor(t,e){if(super(),void 0!==t)switch(t.constructor.name){case"String":t.length>0&&this.push(...document.querySelectorAll(t));break;case"Array":this.push(...t);break;default:t instanceof HTMLElement&&this.push(t)}Object.defineProperty(this,"selector",{enumerable:!1,writable:!0}),this.selector=e}addClass(t){return this.classes("add",t)}attr(t,e){return this.forEach({action:"attr",name:t,value:e})}closest(t){return this.forEach({action:"closest",selector:t})}contains(t){return this.forEach({action:"contains",node:t})}end(){return this.selector}find(t){return this.forEach({action:"find",selector:t})}get(t){return this[t]}hasClass(t,e){return this.forEach({action:"hasClass",class:t,all:e})}html(t){return this.forEach({action:"html",value:t})}is(t,e){return this.forEach({action:"is",selector:t,all:e})}parent(){return this.forEach({action:"parent"})}removeClass(t){return this.classes("remove",t)}text(t){return this.forEach({action:"text",value:t})}toggleClass(t,e){return this.classes("toggle",t)}val(t){return this.forEach({action:"val",value:t})}classes(t,e,s){"string"==typeof e&&(e=e.split(" "));for(let r in this)for(let i in e)"toggle"===t?this[r].classList.toggle(e[i],s):this[r].classList[t](e[i]);return this}forEach(t){if(void 0!==t.value){for(let e in this)switch(t.action){case"attr":this[e].setAttribute(t.name,t.value);break;case"html":this[e].innerHTML=t.value;break;case"text":this[e].textContent=t.value;break;case"val":this[e]instanceof HTMLInputElement&&(this[e].value=t.value)}return this}if(0===this.length)return;let e,s,r=[];for(e in this)switch(t.action){case"attr":s=this[e].getAttribute(t.name),r.push(null!==s?s:void 0);break;case"closest":for(s=this[e].parentNode;!s.matches(t.selector);)if((s=s.parentNode)instanceof HTMLDocument){s=null;break}r.push(s);break;case"contains":if(this[e]===t.node||this[e].contains(t.node))return!0;break;case"find":r.push(...this[e].querySelectorAll(t.selector));break;case"html":r.push(this[e].innerHTML);break;case"hasClass":if(s=this[e].classList.contains(t.class),!0!==t.all){if(s)return!0}else if(!s)return!1;break;case"is":if(s=this[e].matches(t.selector),!0!==t.all){if(s)return!0}else if(!s)return!1;break;case"parent":r.push(this[e].parentNode);break;case"text":r.push(this[e].textContent);break;case"val":r.push(this[e]instanceof HTMLInputElement?this[e].value:void 0)}switch(t.action){case"contains":return!1;case"closest":case"find":case"parent":return new bjs.Selector(r,this);case"hasClass":case"is":return!0===t.all;default:return r.length>1?r:r[0]}}};