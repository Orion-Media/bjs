if(Object.defineProperty(Object.prototype,"getProperty",{value(e){if(""===e)return this;let t,s=this,r=e.toString().split("."),i=r.length;for(t=0;t<i;t++){if(void 0===s[r[t]])return;s=s[r[t]]}return s}}),Object.defineProperty(Object.prototype,"setProperty",{value(e,t){let s,r=this,i=e.toString().split("."),a=i.length;for(s=0;s<a-1;s++)void 0===r[i[s]]&&(r[i[s]]={}),r=r[i[s]];r[i[a-1]]=t}}),(bjs=(e=>new bjs.Selector(e))).strings=[],bjs.models=[],bjs.routers=[],bjs.filters={empty:e=>void 0===e[0]||null===e[0]?e[1]?e[1]:"":e[2]?e[2]:"",if(e){var t=parseFloat(e[0]);return isNaN(t)||(e[0]=t),e[0]?e[1]?e[1]:"":e[2]?e[2]:""},sort(e){if(void 0===e[0]||null===e[0])return"";let t=e[0]instanceof Array?e[0].slice():e[0].keys;return void 0===t?"":t.sort()},reverse(e){let t=bjs.filters.sort(e);return t?t.reverse():""},min(e){let t=bjs.filters.sort(e);return t?t[0]:""},max(e){let t=bjs.filters.reverse(e);return t?t[0]:""}},bjs.attributes={},bjs.__proto__.getModel=function(e){for(var t in this.models)if(this.models[t].selector.contains(e))return this.models[t]},bjs.__proto__.getRouter=function(e){for(var t in this.routers)if(this.routers[t].selector.contains(e))return this.routers[t]},bjs.__proto__.getStringIndex=(e=>{var t=bjs.strings.indexOf(e);return-1===t&&(bjs.strings.push(e),t=bjs.strings.indexOf(e)),t}),bjs.__proto__.observe=(e=>{var t,s,r,i,a;for(i in e){for(t=e[i],a=0;a<t.removedNodes.length;a++)s=t.removedNodes[a],(r=bjs.getModel(s))&&r.unlink(s);for(a=0;a<t.addedNodes.length;a++)s=t.addedNodes[a],(r=bjs.getModel(s))&&r.parse_node(s)}}),bjs.__proto__.route=(()=>{for(let e in bjs.routers)bjs.routers[e].handle(location.href)}),void 0===b)var b=bjs;if(void 0===$)var $=bjs;var bjs,observer=new MutationObserver(bjs.observe);observer.observe(document,{attributes:!0,attributeOldValue:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0}),window.addEventListener("popstate",bjs.route),bjs.Attribute=class{constructor(e,t,s){this.expression=new bjs.Expression(t.value),this.name=t.name,this.node=e,this.model=s}eval(){this.node.setAttribute(this.name,this.expression.eval(this.model)||"")}getLinks(){return this.expression.getLinks()}},bjs.Attribute.check=((e,t)=>{let s=e.getAttribute(t).trim();return s.startsWith("{{")?s:"{{"+s+"}}"}),bjs.App=class{constructor(e,t,s){s={router:!0,...s},this.model=new bjs.Model(e,t,{init:!1}),s.router&&(this.router=new bjs.Router(this.model.selector))}get data(){return this.model.data}route(e,t,s){this.router&&(t?this.router.add(e,t,s):this.router.remove(e))}run(){this.model.init(),this.router&&this.router.trigger()}},bjs.AttributeHideShow=class extends bjs.Attribute{constructor(e,t,s){super(e,t,s),this.type=t.name}eval(){"b-hide"==this.type&&!this.expression.eval(this.model)||"b-show"==this.type&&this.expression.eval(this.model)?this.node.style.display="":this.node.style.display="none"}},bjs.attributes["b-hide"]=bjs.AttributeHideShow,bjs.attributes["b-show"]=bjs.AttributeHideShow,bjs.AttributeModel=class extends bjs.Attribute{constructor(e,t,s){super(e,t,s)}eval(){let e=this.expression.eval(this.model)||"";this.node instanceof HTMLInputElement||this.node instanceof HTMLButtonElement||this.node instanceof HTMLTextAreaElement||this.node instanceof HTMLSelectElement?"object"!=typeof e&&this.node.value!=e&&(this.node.value=e):(e="object"!=typeof e?e.toString():JSON.stringify(e),this.node.textContent!=e&&(this.node.textContent=e))}get(){return this.expression.eval(this.model)||""}set(e){this.model.set(this.expression.property(this.model),e)}},bjs.attributes["b-model"]=bjs.AttributeModel,bjs.Expression=class{constructor(e){this.expression=e,this.tree=this.parse(e.trim())}eval(e,t,s){let r,i,a;switch(t||(t=this.tree),typeof t){case"string":r=s?t:e.get(t);break;case"number":r=t;break;default:switch(t.type){case"+":case"-":case"*":case"/":for(let s in t.params)void 0!==(i=this.eval(e,t.params[s]))&&null!==i&&(void 0!==r&&"number"!=typeof r||"number"==typeof i||(a=parseFloat(i),isNaN(a)||(i=a)),r=void 0===r?i:bjs.Expression.operations[t.type].func(r,i));break;case"&":case"?":case"=":case"#":r=[];for(let s in t.params)i=this.eval(e,t.params[s]),a=parseFloat(i),isNaN(a)||(i=a),r.push(i),r.length>1&&(r=[bjs.Expression.operations[t.type].func(r[0],r[1])]);r=r[0];break;case"value":r=this[s?"property":"eval"](e,t.params[0]);break;case"property":r=s?void 0!==(r=this.property(e,t.params[0]))?r+"."+t.params[1]:void 0:void 0!==(r=this.eval(e,t.params[0]))?r.getProperty(t.params[1]):void 0;break;case"index":r=t.params[0]+"."+this.eval(e,t.params[1]),s||(r=e.get(r));break;case"filter":let n=[];for(let s in t.params)n.push(this.eval(e,t.params[s]));r=bjs.filters[t.name](n)}}return r}property(e,t){return this.eval(e,t,!0)}getLinks(e){void 0===e&&(e=this.tree);let t,s=[];switch(typeof e){case"number":break;case"string":e.endsWith(".length")&&(e=e.substr(0,e.length-7)),e.endsWith(".keys")&&(e=e.substr(0,e.length-5)),s.push(e);break;default:switch(e.type){case"property":s.push.apply(s,this.getLinks(e.params[0]));break;default:for(t in e.params)s.push.apply(s,this.getLinks(e.params[t]))}}return s}parse(e){return e=this.parse_unclosed(e),e=this.parse_strings(e),e=this.parse_operations(e),this.expression=e,e=this.parse_tokens(e),this.parse_tree(e)}parse_unclosed(e){let t,s,r=0,i="",a=/{{.*?}}/gm,n=new RegExp(["=","!=","!","&&","\\|\\|","-","\\+","\\*","\\/","\\[","]","\\(","\\)","\\|",":"].join("|"));for(s=a.exec(e);s;)s.index!==r&&(t=e.substr(r,s.index-r),i+="strings."+bjs.getStringIndex(t)+" + ",r=s.index),t=s[0].substr(2,s[0].length-4).trim(),n.test(t)&&(t="("+t+")"),i+=t+" + ",r+=s[0].length,s=a.exec(e);return(t=e.substr(r)).length&&(i+="strings."+bjs.getStringIndex(t)),i.endsWith(" + ")&&(i=i.substr(0,i.length-3)),i.startsWith("(")&&i.endsWith(")")&&!i.match(/^\(.*(\(|\)).*\)$/)&&(i=i.substr(1,i.length-2)),i}parse_strings(e){let t="",s=0,r={start:0},i=/['"]/gm,a=i.exec(e);for(;a;)r.start?r.delim===a[0]&&(r.string=e.substr(r.start,a.index-r.start),r.index=bjs.getStringIndex(r.string),t+="strings."+r.index,r.start=0):(r.start=a.index+1,r.delim=a[0],t+=e.substr(s,a.index-s)),s=a.index+1,a=i.exec(e);return s<e.length&&(t+=e.substr(s)),t}parse_operations(e){return e=(e=(e=(e=e.replace(/&&/,"&")).replace(/\|\|/,"?")).replace(/==/,"=")).replace(/!=/,"#")}parse_tokens(e){let t,s,r=0,i=/[!&?=#\-+*/[\]()|:]/gm,a=[];for(r=0,i.lastIndex=0,s=i.exec(e);s;)s.index!==r&&((t=e.substr(r,s.index-r).trim()).length&&a.push(e.substr(r,s.index-r).trim()),r=s.index),a.push(s[0].trim()),r+=s[0].length,s=i.exec(e);return(t=e.substr(r).trim()).length&&a.push(t),a}parse_tree(e,t){let s,r;for(void 0===t&&(t={}),void 0===t.params&&(t.params=[]);e.length;)switch(s=e.shift()){case"-":case"+":case"*":case"/":case"&":case"?":case"=":case"#":if(void 0===t.type){t.type=s;continue}if(t.type===s)break;bjs.Expression.operations[t.type].priority==bjs.Expression.operations[s].priority&&t.params.push({type:s,params:[t.params.pop(),this.parse_tree(e)]}),bjs.Expression.operations[t.type].priority>bjs.Expression.operations[s].priority&&(t={type:s,params:[t]}),bjs.Expression.operations[t.type].priority<bjs.Expression.operations[s].priority&&t.params.push(this.parse_tree(e,{type:s,params:[t.params.pop()]}));break;case"(":t.params.push(this.parse_tree(e));break;case")":return void 0===t.type&&(t.type="value"),t;case"[":t.params.push({type:"index",params:[t.params.pop(),this.parse_tree(e)]});break;case"]":return void 0===t.type&&(t.type="value"),t;case"|":for(void 0!==t.type&&(t={params:[t]}),t.type="filter",t.name=e.shift(),s=e.shift();":"===s;)t.params.push(this.parse_tree(e)),s=e.shift();void 0!==s&&e.unshift(s);break;case":":return e.unshift(s),t.params.length?(void 0===t.type&&(t.type="value"),t):"";default:"."==s[0]?(s=s.substr(1),void 0===t.type?(t.type="property",t.params.push(s)):t.params.push({type:"property",params:[t.params.pop(),s]})):(r=parseFloat(s),isNaN(r)||(s=r),t.params.push(s))}return void 0===t.type&&(t.type="value"),t}},bjs.Expression.operations={"+":{priority:0,func:(e,t)=>e+t},"-":{priority:0,func:(e,t)=>e-t},"*":{priority:1,func:(e,t)=>e*t},"/":{priority:1,func:(e,t)=>e/t},"&":{priority:2,func:(e,t)=>Boolean(e&&t)},"?":{priority:2,func:(e,t)=>Boolean(e||t)},"=":{priority:3,func:(e,t)=>Boolean(e==t)},"#":{priority:3,func:(e,t)=>Boolean(e!=t)},filter:{priority:4}},bjs.Model=class{constructor(e,t,s){s={init:!0,...s},bjs.models.push(this),this.proxyHandler=new bjs.ModelProxyHandler(this),this.shadow={...t,strings:bjs.strings},this.proxy=new Proxy({$:""},this.proxyHandler),this.listeners={get:{},set:{},delete:{}},this.links={},this.selector=new bjs.Selector(e),s.init&&this.init()}get data(){return this.proxy}set data(e){e.strings=bjs.strings,this.shadow=e;for(let e in this.selector)this.parse_node(this.selector.get(e),"")}get(e){return this.data.getProperty(e)}set(e,t){this.data.setProperty(e,t)}init(){let e,t;for(e in this.selector)(t=this.selector.get(e)).addEventListener("input",bjs.Model.eventHander,!0),this.parse_node(t)}addListener(e,t,s){this.listeners[e]&&(this.listeners[e][t]||(this.listeners[e][t]=new Set),this.listeners[e][t].add(s))}removeListener(e,t,s){this.listeners[e]&&this.listeners[e][t]&&(this.listeners[e][t].delete(s),this.listeners[e][t].size||delete this.listeners[e][t])}apply_attributes(e){if(e instanceof Text&&void 0!==e.b_expression&&(e.nodeValue=e.b_expression.eval(this)),void 0!==e.b_attributes)for(let t in e.b_attributes)void 0!==bjs.attributes[t]?e.b_attributes[t].eval():e.setAttribute(t,e.b_attributes[t].eval(this))}get_elements(e){let t,s=new Set;for(t in this.links)t.startsWith(e+".")&&this.links[t].forEach(e=>{s.add(e)});for(;""!=e;)void 0!==this.links[e]&&this.links[e].forEach(e=>{s.add(e)}),e=e.split(".").slice(0,-1).join(".");return s}parse_attributes(e){if(e instanceof Text){if(-1!==e.nodeValue.indexOf("{{")){e.b_expression=new bjs.Expression(e.nodeValue);let t,s=e.b_expression.getLinks();for(t in s)this.link(e,s[t]);this.apply_attributes(e)}return}let t,s,r,i,a=e.attributes;for(t=0;t<a.length;t++)if(i={name:a[t].name,value:a[t].value},void 0!==bjs.attributes[i.name]&&(i.value=bjs.attributes[i.name].check(e,i.name)),-1!==i.value.indexOf("{{"))for(s in void 0===e.b_attributes&&(e.b_attributes={}),void 0!==bjs.attributes[i.name]?e.b_attributes[i.name]=new bjs.attributes[i.name](e,i,this):e.b_attributes[i.name]=new bjs.Expression(i.value),r=e.b_attributes[i.name].getLinks())this.link(e,r[s]);this.apply_attributes(e)}parse_node(e,t){if(!(e instanceof Text)){e.hasAttribute("b-for")&&this.parse_for(e,t),e.hasAttribute("b-base")&&this.parse_base(e,t);let s,r,i=e.childNodes;for(s=0;s<i.length;s++)(r=i[s])instanceof Comment||r instanceof HTMLBRElement||r instanceof HTMLScriptElement||this.parse_node(r,t)}void 0!==t?this.apply_attributes(e):this.parse_attributes(e)}parse_for(e,t){let s,r,i,a,n,o;void 0===e.b_template&&(e.b_template=e.children[0],e.b_template.remove()),s=e.getAttribute("b-for"),this.link(e,s),i=e.getAttribute("b-as")||"_",r=e.getAttribute("b-key"),a=this.get(s);for(let l in a)n=a[l][r],(void 0===t||(s+"."+n).startsWith(t))&&((o=e.querySelector('[b-base="'+s+"."+n+'"]'))||((o=e.b_template.cloneNode(!0)).b_for=s+"."+n,o.b_key=n,o.setAttribute("b-base",o.b_for),this.replace_local(o,i,o.b_for),e.appendChild(o)),void 0!==t&&this.parse_base(o,t));if(void 0!==t&&s.startsWith(t)){let t,i=[];for(t=0;t<e.childNodes.length;t++)r=void 0!==(o=e.childNodes[t]).b_key?o.b_key:"",(void 0===a||void 0===a[r]&&void 0!==o.b_for&&o.b_for===s+"."+r)&&i.push(o);for(t in i)i[t].remove()}}parse_base(e,t){let s,r,i,a,n,o;s=i=e.getAttribute("b-base"),this.link(e,i),null!==(r=e.getAttribute("b-key"))&&(this.link(e,r),void 0!==(a=this.get(r))&&void 0!==this.get(i+"."+a)?i+="."+a:i=""),i+=".",n=Array.prototype.slice.call(e.querySelectorAll("[b-field]")),e.hasAttribute("b-field")&&n.push(e);for(let e in n)if(o=n[e],"."!==i){if(a=i+o.getAttribute("b-field"),t&&!a.startsWith(t)&&t!==r)continue;o.getAttribute("b-model")!==a&&(o.setAttribute("b-model",a),this.parse_attributes(o))}else o.removeAttribute("b-model"),this.parse_attributes(o)}link(e,t){void 0===this.links[t]&&(this.links[t]=new Set),this.links[t].add(e),void 0===e.b_links&&(e.b_links=new Set),e.b_links.add(t)}unlink(e,t){if(void 0===t){void 0!==e.b_links&&e.b_links.forEach(function(t){this.unlink(e,t)});let t,s=e.childNodes;for(t=0;t<s.length;t++)this.unlink(s[t])}else void 0!==this.links[t]&&(this.links[t].delete(e),0===this.links[t].size&&delete this.links[t]),void 0!==e.b_links&&e.b_links.delete(t)}replace_local(e,t,s){let r=new RegExp("({{.*?)"+t.replace(".",".")+"([ .}+\\-*/|=#&?])","gim");if(e instanceof Text)return void(e.nodeValue.match(r)&&(e.nodeValue=e.nodeValue.replace(r,"$1"+s+"$2")));let i,a,n,o,l=e.attributes;for(i=0;i<l.length;i++)o=l[i],void 0!==bjs.attributes[o.name]&&bjs.attributes[o.name].check(e,o.name),o.value.match(r)&&e.setAttribute(o.name,o.value.replace(r,"$1"+s+"$2"));for(a=e.childNodes,i=0;i<a.length;i++)(n=a[i])instanceof Comment||n instanceof HTMLBRElement||n instanceof HTMLScriptElement||this.replace_local(n,t,s)}},bjs.Model.eventHander=(e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLButtonElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement))return;if(void 0===e.target.b_attributes||void 0===e.target.b_attributes["b-model"])return;let t=e.target.b_attributes["b-model"],s=t.get(),r=e.target.value;s!==r&&t.set(r)}),bjs.ModelProxyHandler=class{constructor(e){this.model=e}deleteProperty(e,t){let s=this.model.shadow.getProperty(e.$),r=this.model.listeners.delete[e.$];if(r)for(let i of r)i(s,e.$,t);delete s[t];let i=(e.$?e.$+".":"")+t,a=this.model.get_elements(i),n=this.model;return a.forEach(e=>{void 0===e.b_for||e.b_for!==i?n.parse_node(e,i):e.remove()}),!0}get(e,t){if("constructor"===t)return{name:"Proxy"};let s=this.model.shadow.getProperty(e.$);switch(t){case"keys":return Object.keys(s);case"length":return Object.keys(s).length;case"toJSON":return()=>s}let r=this.model.listeners.get[e.$];if(r)for(let i of r)i(s,e.$,t);if(void 0!==s[t]&&null!==s[t])switch(typeof s[t]){case"object":return new Proxy({$:(e.$?e.$+".":"")+t},this.model.proxyHandler);default:return s[t]}}getPrototypeOf(e){return this.model.shadow.getProperty(e.$)}has(e,t){let s=this.model.shadow.getProperty(e.$);return Reflect.has(s,t)}isExtensible(e){let t=this.model.shadow.getProperty(e.$);return Reflect.isExtensible(t)}ownKeys(e){let t=this.model.shadow.getProperty(e.$);return Reflect.ownKeys(t)}set(e,t,s){let r=this.model.shadow.getProperty(e.$),i=this.model.listeners.set[e.$];if(i)for(let a of i)a(r,e.$,t,s);if(r[t]!==s){r[t]=s;let i=(e.$?e.$+".":"")+t,a=this.model.get_elements(i),n=this.model;a.forEach(e=>{n.parse_node(e,i)})}return!0}},bjs.Resource=class{constructor(e,t){this.url=e,this.type=t||"json"}get(e){return this.method("get",e)}post(e){return this.method("post",e)}put(e){return this.method("put",e)}delete(e){return this.method("delete",e)}method(e,t,s){t=t||{};let r=this.url.replace(/\/:([-_0-9a-z]+)(\/|$)/gi,(e,s,r)=>{let i=t[s]||"";return delete t[s],"/"+i+r}),i={mode:"cors",method:e,headers:new Headers(s||bjs.Resource.headers)};switch(e){case"get":case"delete":let s,a=[];for(s in t)a.push(s+"="+encodeURIComponent(t[s]));r+="?"+a.join("&");break;case"post":case"put":i.body=JSON.stringify(t)}return-1!==["post","put"].indexOf(e)&&(i.body=JSON.stringify(t)),fetch(r,i).then(e=>{switch(this.ok=e.ok,this.status=e.status,this.type){case"json":return e.json();case"form":return e.formData();default:return e.text()}}).then(e=>{if(!this.ok){let t=new Error;throw t.status=this.status,t.data=e,t}return e})}},bjs.Resource.headers={},bjs.Router=class{constructor(e){bjs.routers.push(this),this.routes={},this.selector=e,this.init()}init(){let e,t;for(e in this.selector)(t=this.selector.get(e)).addEventListener("click",bjs.Router.eventHander,!0)}add(e,t,s){e=this.normalize(e),this.routes[e]={parts:e.split("/"),callback:t,params:s||{}}}remove(e){e=this.normalize(e),delete this.routes[e]}trigger(e,t){void 0===e&&(e=location.pathname),this.handle(e,t)}handle(e,t){if(e=this.normalize(e),void 0!==this.routes[e])return t&&window.history.pushState({},"","/"+e),this.routes[e].callback(this.routes[e].params),!0;let s,r,i,a,n=Object.assign({},this.routes),o={},l=e.split("/");for(s in l)for(r in a=l[s],n)n[r].parts.length===l.length?(i=n[r].parts[s])!==a&&(void 0!==i&&":"===i[0]?o[i.substr(1)]=a:delete n[r]):delete n[r];if(Object.keys(n).length)for(r in t&&window.history.pushState({},"","/"+e),n)n[r].callback(Object.assign(n[r].params,o));return Object.keys(n).length>0}normalize(e){return e.startsWith(location.origin)&&(e=e.substr(location.origin.length)),e.startsWith("//"+location.host)&&(e=e.substr(("//"+location.host).length)),e.startsWith("/")&&(e=e.substr(1)),e.endsWith("/")&&(e=e.substr(0,e.length-1)),e}},bjs.Router.eventHander=(e=>{let t=e.target;for(;!(t instanceof HTMLAnchorElement);)if((t=t.parentNode)instanceof HTMLDocument)return;let s=bjs.getRouter(t);if(!s)return;let r=t.getAttribute("href");r&&s.handle(r,!0)&&e.preventDefault()}),bjs.Selector=class extends Array{constructor(e,t){if(super(),void 0!==e)switch(e.constructor.name){case"String":e.length>0&&bjs.Selector.prototype.push.apply(this,document.querySelectorAll(e));break;case"Array":bjs.Selector.prototype.push.apply(this,e);break;default:e instanceof HTMLElement&&this.push(e)}Object.defineProperty(this,"selector",{enumerable:!1,writable:!0}),this.selector=t}addClass(e){return this.classes("add",e)}attr(e,t){return this.forEach({action:"attr",name:e,value:t})}closest(e){return this.forEach({action:"closest",selector:e})}contains(e){return this.forEach({action:"contains",node:e})}end(){return this.selector}find(e){return this.forEach({action:"find",selector:e})}get(e){return this[e]}hasClass(e,t){return this.forEach({action:"hasClass",class:e,all:t})}html(e){return this.forEach({action:"html",value:e})}is(e,t){return this.forEach({action:"is",selector:e,all:t})}parent(){return this.forEach({action:"parent"})}removeClass(e){return this.classes("remove",e)}text(e){return this.forEach({action:"text",value:e})}toggleClass(e,t){return this.classes("toggle",e)}val(e){return this.forEach({action:"val",value:e})}classes(e,t,s){"string"==typeof t&&(t=t.split(" "));for(let r in this)for(let i in t)"toggle"===e?this[r].classList.toggle(t[i],s):this[r].classList[e](t[i]);return this}forEach(e){if(void 0!==e.value){for(let t in this)switch(e.action){case"attr":this[t].setAttribute(e.name,e.value);break;case"html":this[t].innerHTML=e.value;break;case"text":this[t].textContent=e.value;break;case"val":this[t]instanceof HTMLInputElement&&(this[t].value=e.value)}return this}if(0===this.length)return;let t,s,r=[];for(t in this)switch(e.action){case"attr":s=this[t].getAttribute(e.name),r.push(null!==s?s:void 0);break;case"closest":for(s=this[t].parentNode;!s.matches(e.selector);)if((s=s.parentNode)instanceof HTMLDocument){s=null;break}r.push(s);break;case"contains":if(this[t]===e.node||this[t].contains(e.node))return!0;break;case"find":Array.prototype.push.apply(r,this[t].querySelectorAll(e.selector));break;case"html":r.push(this[t].innerHTML);break;case"hasClass":if(s=this[t].classList.contains(e.class),!0!==e.all){if(s)return!0}else if(!s)return!1;break;case"is":if(s=this[t].matches(e.selector),!0!==e.all){if(s)return!0}else if(!s)return!1;break;case"parent":r.push(this[t].parentNode);break;case"text":r.push(this[t].textContent);break;case"val":r.push(this[t]instanceof HTMLInputElement?this[t].value:void 0)}switch(e.action){case"contains":return!1;case"closest":case"find":case"parent":return new bjs.Selector(r,this);case"hasClass":case"is":return!0===e.all;default:return r.length>1?r:r[0]}}};