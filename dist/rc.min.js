var rc;if(Object.defineProperty(Object.prototype,"getField",{value(e){if(""===e)return this;let t,r=this,s=e.toString().split("."),i=s.length;for(t=0;t<i;t++){if(void 0===r[s[t]])return;r=r[s[t]]}return r}}),Object.defineProperty(Object.prototype,"setField",{value(e,t){let r,s=this,i=e.toString().split("."),a=i.length;for(r=0;r<a-1;r++)void 0===s[i[r]]&&(s[i[r]]={}),s=s[i[r]];s[i[a-1]]=t}}),(rc=(e=>new rc.Selector(e))).attributes={},rc.models=[],rc.routers=[],rc.strings=[],rc.pipes={empty:e=>void 0===e[0]||null===e[0]?e[1]?e[1]:"":e[2]?e[2]:"",if(e){var t=parseFloat(e[0]);return isNaN(t)||(e[0]=t),e[0]?e[1]?e[1]:"":e[2]?e[2]:""},sort(e){if(void 0===e[0]||null===e[0])return"";let t=e[0]instanceof Array?e[0].slice():e[0].keys;return void 0===t?"":t.sort()},reverse(e){let t=rc.pipes.sort(e);return t?t.reverse():""},min(e){let t=rc.pipes.sort(e);return t?t[0]:""},max(e){let t=rc.pipes.reverse(e);return t?t[0]:""}},rc._attributes=[],rc.__proto__.getAttributes=(()=>{if(rc._attributes.length!==Object.keys(rc.attributes).length){let e=[];for(let t in rc.attributes)e.push({name:t,priority:rc.attributes[t].priority});e.sort((e,t)=>e.priority>t.priority?-1:e.priority<t.priority?1:0),rc._attributes=e}return rc._attributes}),rc.__proto__.getModel=function(e){for(var t in this.models)if(this.models[t].selector.contains(e))return this.models[t]},rc.__proto__.getRouter=function(e){for(var t in this.routers)if(this.routers[t].selector.contains(e))return this.routers[t]},rc.__proto__.getStringIndex=(e=>{var t=rc.strings.indexOf(e);return-1===t&&(rc.strings.push(e),t=rc.strings.indexOf(e)),t}),rc.__proto__.route=(()=>{for(let e in rc.routers)rc.routers[e].handle(location.href)}),void 0===b)var b=rc;if(void 0===$)var $=rc;window.addEventListener("popstate",rc.route),rc.Expression=class{constructor(e){this.expression=e,this.tree=this.parse(e.trim())}eval(e,t,r){let s,i,a;switch(void 0===t&&(t=this.tree),typeof t){case"string":s=r?t:e.get(t);break;case"number":s=t;break;default:switch(t.type){case"+":case"-":case"*":case"/":for(let r in t.params)void 0!==(i=this.eval(e,t.params[r]))&&null!==i&&(void 0!==s&&"number"!=typeof s||"number"==typeof i||(a=parseFloat(i),isNaN(a)||(i=a)),s=void 0===s?i:rc.Expression.operations[t.type].func(s,i));break;case"&":case"?":case"=":case"#":s=[];for(let r in t.params)i=this.eval(e,t.params[r]),a=parseFloat(i),isNaN(a)||(i=a),s.push(i),s.length>1&&(s=[rc.Expression.operations[t.type].func(s[0],s[1])]);s=s[0];break;case"!":s=!this.eval(e,t.params[0]);break;case"value":s=this[r?"property":"eval"](e,t.params[0]);break;case"property":s=r?void 0!==(s=this.property(e,t.params[0]))?s+"."+t.params[1]:void 0:void 0!==(s=this.eval(e,t.params[0]))?s.getField(t.params[1]):void 0;break;case"index":s=t.params[0]+"."+this.eval(e,t.params[1]),r||(s=e.get(s));break;case"pipe":let n=[];for(let r in t.params)n.push(this.eval(e,t.params[r]));s=rc.pipes[t.name](n)}}return s}property(e,t){return this.eval(e,t,!0)}getLinks(e){void 0===e&&(e=this.tree);let t,r=[];switch(typeof e){case"number":break;case"string":e.endsWith(".length")&&(e=e.substr(0,e.length-7)),e.endsWith(".keys")&&(e=e.substr(0,e.length-5)),r.push(e);break;default:switch(e.type){case"property":r.push(...this.getLinks(e.params[0]));break;default:for(t in e.params)r.push(...this.getLinks(e.params[t]))}}return r}parse(e){return e=this.parse_unclosed(e),e=this.parse_strings(e),e=this.parse_operations(e),this.expression=e,e=this.parse_tokens(e),this.parse_tree(e)}parse_unclosed(e){let t,r,s=0,i="",a=/{{.*?}}/gm,n=new RegExp(["=","!=","!","&&","\\|\\|","-","\\+","\\*","\\/","\\[","]","\\(","\\)","\\|",":"].join("|"));for(r=a.exec(e);r;)r.index!==s&&(t=e.substr(s,r.index-s),i+="strings."+rc.getStringIndex(t)+" + ",s=r.index),t=r[0].substr(2,r[0].length-4).trim(),n.test(t)&&(t="("+t+")"),i+=t+" + ",s+=r[0].length,r=a.exec(e);return(t=e.substr(s)).length&&(i+="strings."+rc.getStringIndex(t)),i.endsWith(" + ")&&(i=i.substr(0,i.length-3)),i.startsWith("(")&&i.endsWith(")")&&!i.match(/^\(.*(\(|\)).*\)$/)&&(i=i.substr(1,i.length-2)),i}parse_strings(e){let t="",r=0,s={start:0},i=/['"]/gm,a=i.exec(e);for(;a;)s.start?s.delim===a[0]&&(s.string=e.substr(s.start,a.index-s.start),s.index=rc.getStringIndex(s.string),t+="strings."+s.index,s.start=0):(s.start=a.index+1,s.delim=a[0],t+=e.substr(r,a.index-r)),r=a.index+1,a=i.exec(e);return r<e.length&&(t+=e.substr(r)),t}parse_operations(e){return e=(e=(e=(e=e.replace(/&&/g,"&")).replace(/\|\|/g,"?")).replace(/==/g,"=")).replace(/!=/g,"#")}parse_tokens(e){let t,r,s=0,i=/[!&?=#\-+*/[\]()|:]/gm,a=[];for(s=0,i.lastIndex=0,r=i.exec(e);r;)r.index!==s&&((t=e.substr(s,r.index-s).trim()).length&&a.push(e.substr(s,r.index-s).trim()),s=r.index),a.push(r[0].trim()),s+=r[0].length,r=i.exec(e);return(t=e.substr(s).trim()).length&&a.push(t),a}parse_tree(e,t){let r,s;for(void 0===t&&(t={}),void 0===t.params&&(t.params=[]);e.length;)switch(r=e.shift()){case"-":case"+":case"*":case"/":case"&":case"?":case"=":case"#":case"!":if(void 0===t.type){t.type=r;continue}if(t.type===r)break;rc.Expression.operations[t.type].priority>=rc.Expression.operations[r].priority&&(t={type:r,params:[t]}),rc.Expression.operations[t.type].priority<rc.Expression.operations[r].priority&&t.params.push(this.parse_tree(e,{type:r,params:[t.params.pop()]}));break;case"(":t.params.push(this.parse_tree(e));break;case")":return void 0===t.type&&(t.type="value"),t;case"[":void 0===t.type?(t.type="index",t.params.push(this.parse_tree(e))):t.params.push({type:"index",params:[t.params.pop(),this.parse_tree(e)]});break;case"]":return void 0===t.type&&(t.type="value"),t;case"|":for(void 0!==t.type&&(t={params:[t]}),t.type="pipe",t.name=e.shift(),r=e.shift();":"===r;)t.params.push(this.parse_tree(e)),r=e.shift();void 0!==r&&e.unshift(r);break;case":":return e.unshift(r),t.params.length?(void 0===t.type&&(t.type="value"),t):"";default:"."==r[0]?(r=r.substr(1),void 0===t.type?(t.type="property",t.params.push(r)):t={type:"property",params:[t,r]}):(s=parseFloat(r),isNaN(s)||(r=s),t.params.push(r))}return void 0===t.type&&(t.type="value"),t}},rc.Expression.operations={"+":{priority:0,func:(e,t)=>e+t},"-":{priority:0,func:(e,t)=>e-t},"*":{priority:1,func:(e,t)=>e*t},"/":{priority:1,func:(e,t)=>e/t},"&":{priority:2,func:(e,t)=>Boolean(e&&t)},"?":{priority:2,func:(e,t)=>Boolean(e||t)},"=":{priority:3,func:(e,t)=>Boolean(e==t)},"#":{priority:3,func:(e,t)=>Boolean(e!=t)},"!":{priority:4},property:{priority:5},pipe:{priority:6}},rc.Attribute=class extends rc.Expression{constructor(e,t,r){super(e.attributes[t].value),this.name=t,this.node=e,this.model=r}apply(){let e=this.eval(this.model);e=void 0!==e?e.toString():"",this.node.getAttribute(this.name)!==e&&this.node.setAttribute(this.name,e)}},rc.Attribute.priority=0,rc.Attribute.check=((e,t)=>{let r=e.getAttribute(t).trim();return r.startsWith("{{")?r:"{{"+r+"}}"}),rc.App=class{constructor(e,t,r){r={clean:!0,router:!0,run:!1,...r},this.model=new rc.Model(e,t,{init:!1}),r.clean&&this.clean(),r.router&&(this.router=new rc.Router(this.model.selector)),r.run&&this.run()}get data(){return this.model.data}set data(e){this.model.data=e}route(e,t,r){this.router&&(t?this.router.add(e,t,r):this.router.remove(e))}run(){this.model.init(),this.router&&this.router.trigger()}clean(){let e,t=[],r=document.createTreeWalker(document,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT,null,!1);for(;e=r.nextNode();)switch(e.nodeType){case Node.TEXT_NODE:e.nodeValue.match(/[^\s\n]/m)||t.push(e);break;case Node.COMMENT_NODE:t.push(e)}for(e in t)t[e].remove()}},rc.AttributeBase=class extends rc.Attribute{constructor(e,t,r){let s=e.attributes[t],i=s.value.match(/^{{(.*?)(\s+as\s+([a-z0-9_]+))}}$/im);s.value="{{"+i[1]+"}}",super(e,t,r),this.alias=i[3],this.apply()}apply(){let e,t,r=this.node.childNodes,s=this.property(this.model);for(e=0;e<r.length;e++)t=r[e],this.dealias(t,this.alias,s)}dealias(e,t,r){let s,i=new RegExp("(^|[^a-z])"+t.replace(/\./g,"\\.")+"([^a-z]|$)","gim");if(e instanceof Text)return e.rc_base?s=e.rc_base.replace(i,"$1"+r+"$2"):e.nodeValue.match(i)?(e.rc_base=e.nodeValue,s=e.nodeValue.replace(i,"$1"+r+"$2")):s=e.nodeValue,void(e.nodeValue!==s&&(e.nodeValue=s,this.model.parseAttributes(e),this.model.applyAttributes(e)));e.rc_base=e.rc_base||{};let a,n,o=e.attributes;for(a=0;a<o.length;a++)n=o[a],s=rc.attributes[n.name]?rc.attributes[n.name].check(e,n.name):n.value,e.rc_base[n.name]?s=e.rc_base[n.name].replace(i,"$1"+r+"$2"):s.match(i)&&(e.rc_base[n.name]=s,s=s.replace(i,"$1"+r+"$2")),n.value!==s&&(n.value=s,this.model.parseAttribute(e,n.name),this.model.applyAttribute(e,n.name));for(Object.keys(e.rc_base).length||delete e.rc_base,o=e.childNodes,a=0;a<o.length;a++)(n=o[a])instanceof Comment||n instanceof HTMLBRElement||n instanceof HTMLScriptElement||this.dealias(n,t,r)}},rc.attributes["rc-base"]=rc.AttributeBase,rc.AttributeFor=class extends rc.Attribute{constructor(e,t,r){let s=e.attributes[t],i=s.value.match(/^{{([a-z0-9_]+)\s+in\s+(.*?)(\s+key\s+([a-z0-9_]+))?}}$/im);s.value="{{"+i[2]+"}}",super(e,t,r),this.alias=i[1],this.key=i[4],this.template=e.children[0],e.innerHTML=""}apply(){let e,t,r,s=[],i=this.property(this.model),a=this.eval(this.model);for(e in a)t=void 0!==this.key?a[e][this.key]:e,(r=this.node.querySelector('[rc-key="'+t+'"]'))&&r.rc_index!==e&&(r.remove(),r=null),r||((r=this.template.cloneNode(!0)).rc_index=e,r.setAttribute("rc-key",t),this.dealias(r,"\\$index",e),this.dealias(r,"\\$key",t),this.dealias(r,this.alias,i+"."+e),this.node.appendChild(r),this.model.parseNode(r));for(e=0;e<this.node.childNodes.length;e++)r=this.node.childNodes[e],void 0!==a&&void 0!==a[r.rc_index]||s.push(r);for(e in s)this.model.unlink(s[e]),s[e].remove()}dealias(e,t,r){let s=new RegExp("(^|[^a-z])"+t.replace(/\./g,"\\.")+"([^a-z]|$)","gim"),i=new RegExp("{{");if(e instanceof Text)return void(e.nodeValue.match(s)&&(e.nodeValue=e.nodeValue.replace(s,"$1"+r+"$2")));let a,n,o=e.attributes;for(a=0;a<o.length;a++)n=o[a],(rc.attributes[n.name]||n.value.match(i))&&n.value.match(s)&&(n.value=n.value.replace(s,"$1"+r+"$2"));for(o=e.childNodes,a=0;a<o.length;a++)(n=o[a])instanceof Comment||n instanceof HTMLBRElement||n instanceof HTMLScriptElement||this.dealias(n,t,r)}},rc.AttributeFor.priority=99,rc.attributes["rc-for"]=rc.AttributeFor,rc.AttributeHideShow=class extends rc.Attribute{constructor(e,t,r){super(e,t,r),this.type=t}apply(){"rc-hide"==this.type&&!this.eval(this.model)||"rc-show"==this.type&&this.eval(this.model)?this.node.style.display="":this.node.style.display="none"}},rc.attributes["rc-hide"]=rc.AttributeHideShow,rc.attributes["rc-show"]=rc.AttributeHideShow,rc.AttributeModel=class extends rc.Attribute{constructor(e,t,r){super(e,t,r)}apply(){let e=this.eval(this.model);e=void 0!==e?"object"!=typeof e?e.toString():JSON.stringify(e):"",this.node instanceof HTMLInputElement||this.node instanceof HTMLButtonElement||this.node instanceof HTMLTextAreaElement||this.node instanceof HTMLSelectElement?this.node.value!=e&&(this.node.value=e):this.node.textContent!=e&&(this.node.textContent=e)}get(){let e=this.eval(this.model);return void 0!==e?e:""}set(e){this.model.set(this.property(this.model),e)}},rc.attributes["rc-model"]=rc.AttributeModel,rc.Model=class{constructor(e,t,r){r={init:!0,...r},rc.models.push(this),this.proxyHandler=new rc.ModelProxyHandler(this),this.shadow={...t,strings:rc.strings},this.proxy=new Proxy({$:""},this.proxyHandler),this.listeners={get:{},set:{},delete:{}},this.links={},this.selector=new rc.Selector(e),r.init&&this.init()}get data(){return this.proxy}set data(e){e.strings=rc.strings,this.shadow=e;for(let e in this.selector)this.parseNode(this.selector.get(e),"")}get(e){return this.data.getField(e)}set(e,t){this.data.setField(e,t)}init(){let e,t;for(e in this.selector)(t=this.selector.get(e)).addEventListener("input",rc.Model.eventHander,!0),this.parseNode(t)}addListener(e,t,r){this.listeners[e]&&(this.listeners[e][t]||(this.listeners[e][t]=new Set),this.listeners[e][t].add(r))}removeListener(e,t,r){this.listeners[e]&&this.listeners[e][t]&&(this.listeners[e][t].delete(r),this.listeners[e][t].size||delete this.listeners[e][t])}applyAttributes(e){if(void 0===e.rc_attributes)return;if(e instanceof Text){let t=e.rc_attributes[""].eval(this);return t=void 0!==t?t.toString():"",void(e.nodeValue!==t&&(e.nodeValue=t))}let t;for(t in e.rc_attributes)this.applyAttribute(e,t)}applyAttribute(e,t){void 0!==e.rc_attributes&&void 0!==e.rc_attributes[t]&&e.rc_attributes[t].apply()}getNodes(e){let t,r,s=new Set;for(t in this.links)if(t.startsWith(e+"."))for(r of this.links[t])s.add(r);for(;""!=e;){if(void 0!==this.links[e])for(r of this.links[e])s.add(r);e=e.split(".").slice(0,-1).join(".")}return s}parseNode(e){if(this.parseAttributes(e),e instanceof Text)return void this.applyAttributes(e);let t,r,s=e.childNodes;for(t=0;t<s.length;t++)(r=s[t])instanceof Comment||r instanceof HTMLBRElement||r instanceof HTMLScriptElement||this.parseNode(r);this.applyAttributes(e)}parseAttributes(e){if(e instanceof Text)return void(-1!==e.nodeValue.indexOf("{{")?(e.rc_attributes={"":new rc.Expression(e.nodeValue)},this.updateLinks(e)):void 0===e.rc_attributes&&delete e.rc_attributes);let t,r,s=rc.getAttributes();for(t in s)this.parseAttribute(e,s[t].name);for(t=0;t<e.attributes.length;t++)r=e.attributes[t],void 0===rc.attributes[r.name]&&this.parseAttribute(e,r.name);e.rc_attributes&&this.updateLinks(e)}parseAttribute(e,t){let r,s=e.attributes[t];if(s){if(e.rc_attributes&&e.rc_attributes[t]){if("{{"+e.rc_attributes[t].expression+"}}"===s.value)return}if(rc.attributes[t])r=rc.attributes[t].check(e,t),s.value!==r&&(s.value=r),s=new rc.attributes[t](e,t,this);else{if(-1===s.value.indexOf("{{"))return;void 0===rc.attributes[t]&&(s=new rc.Attribute(e,t,this))}void 0===e.rc_attributes&&(e.rc_attributes={}),e.rc_attributes[t]=s}else e.rc_attributes&&delete e.rc_attributes[t]}updateLinks(e){var t,r,s,i=new Set;for(t in e.rc_attributes)for(r in s=e.rc_attributes[t].getLinks())i.add(s[r]);for(t of s=e.rc_links||new Set)i.has(t)||this.unlink(e,t);for(t of i)s.has(t)||this.link(e,t)}link(e,t){void 0===this.links[t]&&(this.links[t]=new Set),this.links[t].add(e),void 0===e.rc_links&&(e.rc_links=new Set),e.rc_links.add(t)}unlink(e,t){if(void 0===t){if(void 0!==e.rc_links)for(let t of e.rc_links)this.unlink(e,t);let t,r=e.childNodes;for(t=0;t<r.length;t++)this.unlink(r[t])}else void 0!==this.links[t]&&(this.links[t].delete(e),0===this.links[t].size&&delete this.links[t]),void 0!==e.rc_links&&(e.rc_links.delete(t),0===e.rc_links.size&&delete e.rc_links)}},rc.Model.eventHander=(e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLButtonElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement))return;if(void 0===e.target.rc_attributes||void 0===e.target.rc_attributes["rc-model"])return;let t=e.target.rc_attributes["rc-model"],r=t.get(),s=e.target.value;r!==s&&t.set(s)}),rc.ModelProxyHandler=class{constructor(e){this.model=e}deleteProperty(e,t){let r=this.model.shadow.getField(e.$),s=this.model.listeners.delete[e.$];if(s)for(let i of s)i(r,e.$,t);delete r[t];let i,a=(e.$?e.$+".":"")+t,n=this.model.getNodes(a);for(i of n)this.model.applyAttributes(i,a);return!0}get(e,t){if("constructor"===t)return{name:"Proxy"};let r=this.model.shadow.getField(e.$);switch(t){case"keys":return Object.keys(r);case"length":return Object.keys(r).length;case"toJSON":return()=>r;case"clone":return()=>({...r})}let s=this.model.listeners.get[e.$];if(s)for(let i of s)i(r,e.$,t);if(void 0!==r[t]&&null!==r[t])switch(typeof r[t]){case"object":return new Proxy({$:(e.$?e.$+".":"")+t},this.model.proxyHandler);default:return r[t]}}getPrototypeOf(e){return this.model.shadow.getField(e.$)}has(e,t){let r=this.model.shadow.getField(e.$);return Reflect.has(r,t)}isExtensible(e){let t=this.model.shadow.getField(e.$);return Reflect.isExtensible(t)}ownKeys(e){let t=this.model.shadow.getField(e.$);return Object.keys(t)}set(e,t,r){let s=this.model.shadow.getField(e.$),i=this.model.listeners.set[e.$];if("Proxy"===r.constructor.name&&(r=r.clone()),i)for(let a of i)a(s,e.$,t,r);if(s[t]!==r){s[t]=r;let i,a=(e.$?e.$+".":"")+t,n=this.model.getNodes(a);for(i of n)this.model.applyAttributes(i,a)}return!0}},rc.Resource=class{constructor(e,t){this.url=e,this.type=t||"json"}get(e){return this.method("get",e)}post(e){return this.method("post",e)}put(e){return this.method("put",e)}delete(e){return this.method("delete",e)}method(e,t,r){"Proxy"===(t=t||{}).constructor.name&&(t=t.clone());let s=this.url.replace(/\/:([-_0-9a-z]+)(\/|$)/gi,(e,r,s)=>{let i=t[r]||"";return delete t[r],"/"+i+s}),i={mode:"cors",method:e,headers:new Headers(r||rc.Resource.headers)};switch(e){case"get":case"delete":let r,a=[];for(r in t)a.push(r+"="+encodeURIComponent(t[r]));s+="?"+a.join("&");break;case"post":case"put":i.body=JSON.stringify(t)}return-1!==["post","put"].indexOf(e)&&(i.body=JSON.stringify(t)),fetch(s,i).then(e=>{switch(this.ok=e.ok,this.status=e.status,this.type){case"json":return e.json();case"form":return e.formData();default:return e.text()}}).then(e=>{if(!this.ok){let t=new Error;throw t.status=this.status,t.data=e,t}return e})}},rc.Resource.headers={},rc.Router=class{constructor(e){rc.routers.push(this),this.routes={},this.selector=e,this.init()}init(){let e,t;for(e in this.selector)(t=this.selector.get(e)).addEventListener("click",rc.Router.eventHander,!0)}add(e,t,r){e=this.normalize(e),this.routes[e]={parts:e.split("/"),callback:t,params:r||{}}}remove(e){e=this.normalize(e),delete this.routes[e]}trigger(e,t){void 0===e&&(e=location.pathname),this.handle(e,t)}handle(e,t){if(e=this.normalize(e),void 0!==this.routes[e])return t&&window.history.pushState({},"","/"+e),this.routes[e].callback(this.routes[e].params),!0;let r,s,i,a,n=Object.assign({},this.routes),o={},l=e.split("/");for(r in l)for(s in a=l[r],n)n[s].parts.length===l.length?(i=n[s].parts[r])!==a&&(void 0!==i&&":"===i[0]?o[i.substr(1)]=a:delete n[s]):delete n[s];if(Object.keys(n).length)for(s in t&&window.history.pushState({},"","/"+e),n)n[s].callback(Object.assign(n[s].params,o));return Object.keys(n).length>0}normalize(e){return e.startsWith(location.origin)&&(e=e.substr(location.origin.length)),e.startsWith("//"+location.host)&&(e=e.substr(("//"+location.host).length)),e.startsWith("/")&&(e=e.substr(1)),e.endsWith("/")&&(e=e.substr(0,e.length-1)),e}},rc.Router.eventHander=(e=>{let t=e.target;for(;!(t instanceof HTMLAnchorElement);)if((t=t.parentNode)instanceof HTMLDocument)return;let r=rc.getRouter(t);if(!r)return;let s=t.getAttribute("href");s&&r.handle(s,!0)&&e.preventDefault()}),rc.Selector=class extends Array{constructor(e,t){if(super(),void 0!==e)switch(e.constructor.name){case"String":e.length>0&&this.push(...document.querySelectorAll(e));break;case"Array":this.push(...e);break;default:e instanceof HTMLElement&&this.push(e)}Object.defineProperty(this,"selector",{enumerable:!1,writable:!0}),this.selector=t}addClass(e){return this.classes("add",e)}attr(e,t){return this.forEach({action:"attr",name:e,value:t})}closest(e){return this.forEach({action:"closest",selector:e})}contains(e){return this.forEach({action:"contains",node:e})}end(){return this.selector}find(e){return this.forEach({action:"find",selector:e})}get(e){return this[e]}hasClass(e,t){return this.forEach({action:"hasClass",class:e,all:t})}html(e){return this.forEach({action:"html",value:e})}is(e,t){return this.forEach({action:"is",selector:e,all:t})}parent(){return this.forEach({action:"parent"})}removeClass(e){return this.classes("remove",e)}text(e){return this.forEach({action:"text",value:e})}toggleClass(e,t){return this.classes("toggle",e)}val(e){return this.forEach({action:"val",value:e})}classes(e,t,r){"string"==typeof t&&(t=t.split(" "));for(let s in this)for(let i in t)"toggle"===e?this[s].classList.toggle(t[i],r):this[s].classList[e](t[i]);return this}forEach(e){if(void 0!==e.value){for(let t in this)switch(e.action){case"attr":this[t].setAttribute(e.name,e.value);break;case"html":this[t].innerHTML=e.value;break;case"text":this[t].textContent=e.value;break;case"val":this[t]instanceof HTMLInputElement&&(this[t].value=e.value)}return this}if(0===this.length)return;let t,r,s=[];for(t in this)switch(e.action){case"attr":r=this[t].getAttribute(e.name),s.push(null!==r?r:void 0);break;case"closest":for(r=this[t].parentNode;!r.matches(e.selector);)if((r=r.parentNode)instanceof HTMLDocument){r=null;break}s.push(r);break;case"contains":if(this[t]===e.node||this[t].contains(e.node))return!0;break;case"find":s.push(...this[t].querySelectorAll(e.selector));break;case"html":s.push(this[t].innerHTML);break;case"hasClass":if(r=this[t].classList.contains(e.class),!0!==e.all){if(r)return!0}else if(!r)return!1;break;case"is":if(r=this[t].matches(e.selector),!0!==e.all){if(r)return!0}else if(!r)return!1;break;case"parent":s.push(this[t].parentNode);break;case"text":s.push(this[t].textContent);break;case"val":s.push(this[t]instanceof HTMLInputElement?this[t].value:void 0)}switch(e.action){case"contains":return!1;case"closest":case"find":case"parent":return new rc.Selector(s,this);case"hasClass":case"is":return!0===e.all;default:return s.length>1?s:s[0]}}};