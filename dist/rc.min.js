var rc;if(Object.defineProperty(Object.prototype,"getProperty",{value(t){if(""===t)return this;let e,r=this,s=t.toString().split("."),i=s.length;for(e=0;e<i;e++){if(void 0===r[s[e]])return;r=r[s[e]]}return r}}),Object.defineProperty(Object.prototype,"setProperty",{value(t,e){let r,s=this,i=t.toString().split("."),a=i.length;for(r=0;r<a-1;r++)void 0===s[i[r]]&&(s[i[r]]={}),s=s[i[r]];s[i[a-1]]=e}}),(rc=(t=>new rc.Selector(t))).attributes={},rc.models=[],rc.routers=[],rc.strings=[],rc.pipes={empty:t=>void 0===t[0]||null===t[0]?t[1]?t[1]:"":t[2]?t[2]:"",if(t){var e=parseFloat(t[0]);return isNaN(e)||(t[0]=e),t[0]?t[1]?t[1]:"":t[2]?t[2]:""},sort(t){if(void 0===t[0]||null===t[0])return"";let e=t[0]instanceof Array?t[0].slice():t[0].keys;return void 0===e?"":e.sort()},reverse(t){let e=rc.pipes.sort(t);return e?e.reverse():""},min(t){let e=rc.pipes.sort(t);return e?e[0]:""},max(t){let e=rc.pipes.reverse(t);return e?e[0]:""}},rc._attributes=[],rc.__proto__.getAttributes=(()=>{if(rc._attributes.length!==Object.keys(rc.attributes).length){let t=[];for(let e in rc.attributes)t.push({name:e,priority:rc.attributes[e].priority});t.sort((t,e)=>t.priority>e.priority?-1:t.priority<e.priority?1:0),rc._attributes=t}return rc._attributes}),rc.__proto__.getModel=function(t){for(var e in this.models)if(this.models[e].selector.contains(t))return this.models[e]},rc.__proto__.getRouter=function(t){for(var e in this.routers)if(this.routers[e].selector.contains(t))return this.routers[e]},rc.__proto__.getStringIndex=(t=>{var e=rc.strings.indexOf(t);return-1===e&&(rc.strings.push(t),e=rc.strings.indexOf(t)),e}),rc.__proto__.route=(()=>{for(let t in rc.routers)rc.routers[t].handle(location.href)}),void 0===b)var b=rc;if(void 0===$)var $=rc;window.addEventListener("popstate",rc.route),rc.Expression=class{constructor(t){this.expression=t,this.tree=this.parse(t.trim())}eval(t,e,r){let s,i,a;switch(void 0===e&&(e=this.tree),typeof e){case"string":s=r?e:t.get(e);break;case"number":s=e;break;default:switch(e.type){case"+":case"-":case"*":case"/":for(let r in e.params)void 0!==(i=this.eval(t,e.params[r]))&&null!==i&&(void 0!==s&&"number"!=typeof s||"number"==typeof i||(a=parseFloat(i),isNaN(a)||(i=a)),s=void 0===s?i:rc.Expression.operations[e.type].func(s,i));break;case"&":case"?":case"=":case"#":s=[];for(let r in e.params)i=this.eval(t,e.params[r]),a=parseFloat(i),isNaN(a)||(i=a),s.push(i),s.length>1&&(s=[rc.Expression.operations[e.type].func(s[0],s[1])]);s=s[0];break;case"!":s=!this.eval(t,e.params[0]);break;case"value":s=this[r?"property":"eval"](t,e.params[0]);break;case"property":s=r?void 0!==(s=this.property(t,e.params[0]))?s+"."+e.params[1]:void 0:void 0!==(s=this.eval(t,e.params[0]))?s.getProperty(e.params[1]):void 0;break;case"index":s=e.params[0]+"."+this.eval(t,e.params[1]),r||(s=t.get(s));break;case"pipe":let n=[];for(let r in e.params)n.push(this.eval(t,e.params[r]));s=rc.pipes[e.name](n)}}return s}property(t,e){return this.eval(t,e,!0)}getLinks(t){void 0===t&&(t=this.tree);let e,r=[];switch(typeof t){case"number":break;case"string":t.endsWith(".length")&&(t=t.substr(0,t.length-7)),t.endsWith(".keys")&&(t=t.substr(0,t.length-5)),r.push(t);break;default:switch(t.type){case"property":r.push(...this.getLinks(t.params[0]));break;default:for(e in t.params)r.push(...this.getLinks(t.params[e]))}}return r}parse(t){return t=this.parse_unclosed(t),t=this.parse_strings(t),t=this.parse_operations(t),this.expression=t,t=this.parse_tokens(t),this.parse_tree(t)}parse_unclosed(t){let e,r,s=0,i="",a=/{{.*?}}/gm,n=new RegExp(["=","!=","!","&&","\\|\\|","-","\\+","\\*","\\/","\\[","]","\\(","\\)","\\|",":"].join("|"));for(r=a.exec(t);r;)r.index!==s&&(e=t.substr(s,r.index-s),i+="strings."+rc.getStringIndex(e)+" + ",s=r.index),e=r[0].substr(2,r[0].length-4).trim(),n.test(e)&&(e="("+e+")"),i+=e+" + ",s+=r[0].length,r=a.exec(t);return(e=t.substr(s)).length&&(i+="strings."+rc.getStringIndex(e)),i.endsWith(" + ")&&(i=i.substr(0,i.length-3)),i.startsWith("(")&&i.endsWith(")")&&!i.match(/^\(.*(\(|\)).*\)$/)&&(i=i.substr(1,i.length-2)),i}parse_strings(t){let e="",r=0,s={start:0},i=/['"]/gm,a=i.exec(t);for(;a;)s.start?s.delim===a[0]&&(s.string=t.substr(s.start,a.index-s.start),s.index=rc.getStringIndex(s.string),e+="strings."+s.index,s.start=0):(s.start=a.index+1,s.delim=a[0],e+=t.substr(r,a.index-r)),r=a.index+1,a=i.exec(t);return r<t.length&&(e+=t.substr(r)),e}parse_operations(t){return t=(t=(t=(t=t.replace(/&&/g,"&")).replace(/\|\|/g,"?")).replace(/==/g,"=")).replace(/!=/g,"#")}parse_tokens(t){let e,r,s=0,i=/[!&?=#\-+*/[\]()|:]/gm,a=[];for(s=0,i.lastIndex=0,r=i.exec(t);r;)r.index!==s&&((e=t.substr(s,r.index-s).trim()).length&&a.push(t.substr(s,r.index-s).trim()),s=r.index),a.push(r[0].trim()),s+=r[0].length,r=i.exec(t);return(e=t.substr(s).trim()).length&&a.push(e),a}parse_tree(t,e){let r,s;for(void 0===e&&(e={}),void 0===e.params&&(e.params=[]);t.length;)switch(r=t.shift()){case"-":case"+":case"*":case"/":case"&":case"?":case"=":case"#":case"!":if(void 0===e.type){e.type=r;continue}if(e.type===r)break;rc.Expression.operations[e.type].priority>=rc.Expression.operations[r].priority&&(e={type:r,params:[e]}),rc.Expression.operations[e.type].priority<rc.Expression.operations[r].priority&&e.params.push(this.parse_tree(t,{type:r,params:[e.params.pop()]}));break;case"(":e.params.push(this.parse_tree(t));break;case")":return void 0===e.type&&(e.type="value"),e;case"[":void 0===e.type?(e.type="index",e.params.push(this.parse_tree(t))):e.params.push({type:"index",params:[e.params.pop(),this.parse_tree(t)]});break;case"]":return void 0===e.type&&(e.type="value"),e;case"|":for(void 0!==e.type&&(e={params:[e]}),e.type="pipe",e.name=t.shift(),r=t.shift();":"===r;)e.params.push(this.parse_tree(t)),r=t.shift();void 0!==r&&t.unshift(r);break;case":":return t.unshift(r),e.params.length?(void 0===e.type&&(e.type="value"),e):"";default:"."==r[0]?(r=r.substr(1),void 0===e.type?(e.type="property",e.params.push(r)):e={type:"property",params:[e,r]}):(s=parseFloat(r),isNaN(s)||(r=s),e.params.push(r))}return void 0===e.type&&(e.type="value"),e}},rc.Expression.operations={"+":{priority:0,func:(t,e)=>t+e},"-":{priority:0,func:(t,e)=>t-e},"*":{priority:1,func:(t,e)=>t*e},"/":{priority:1,func:(t,e)=>t/e},"&":{priority:2,func:(t,e)=>Boolean(t&&e)},"?":{priority:2,func:(t,e)=>Boolean(t||e)},"=":{priority:3,func:(t,e)=>Boolean(t==e)},"#":{priority:3,func:(t,e)=>Boolean(t!=e)},"!":{priority:4},property:{priority:5},pipe:{priority:6}},rc.Attribute=class extends rc.Expression{constructor(t,e,r){super(t.attributes[e].value),this.name=e,this.node=t,this.model=r}apply(){let t=this.eval(this.model);t=void 0!==t?t.toString():"",this.node.getAttribute(this.name)!==t&&this.node.setAttribute(this.name,t)}},rc.Attribute.priority=0,rc.Attribute.check=((t,e)=>{let r=t.getAttribute(e).trim();return r.startsWith("{{")?r:"{{"+r+"}}"}),rc.App=class{constructor(t,e,r){r={clean:!0,router:!0,run:!1,...r},this.model=new rc.Model(t,e,{init:!1}),r.clean&&this.clean(),r.router&&(this.router=new rc.Router(this.model.selector)),r.run&&this.run()}get data(){return this.model.data}set data(t){this.model.data=t}route(t,e,r){this.router&&(e?this.router.add(t,e,r):this.router.remove(t))}run(){this.model.init(),this.router&&this.router.trigger()}clean(){let t,e=[],r=document.createTreeWalker(document,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT,null,!1);for(;t=r.nextNode();)switch(t.nodeType){case Node.TEXT_NODE:t.nodeValue.match(/[^\s\n]/m)||e.push(t);break;case Node.COMMENT_NODE:e.push(t)}for(t in e)e[t].remove()}},rc.AttributeBase=class extends rc.Attribute{constructor(t,e,r){let s=t.attributes[e],i=s.value.match(/^{{(.*?)(\s+as\s+([a-z0-9_]+))}}$/im);s.value="{{"+i[1]+"}}",super(t,e,r),this.alias=i[3],this.apply()}apply(){let t,e,r=this.node.childNodes,s=this.property(this.model);for(t=0;t<r.length;t++)e=r[t],this.dealias(e,this.alias,s)}dealias(t,e,r){let s,i=new RegExp("(^|[^a-z])"+e.replace(/\./g,"\\.")+"([^a-z]|$)","gim");if(t instanceof Text)return t.rc_base?s=t.rc_base.replace(i,"$1"+r+"$2"):t.nodeValue.match(i)?(t.rc_base=t.nodeValue,s=t.nodeValue.replace(i,"$1"+r+"$2")):s=t.nodeValue,void(t.nodeValue!==s&&(t.nodeValue=s,this.model.parseAttributes(t),this.model.applyAttributes(t)));t.rc_base=t.rc_base||{};let a,n,o=t.attributes;for(a=0;a<o.length;a++)n=o[a],s=rc.attributes[n.name]?rc.attributes[n.name].check(t,n.name):n.value,t.rc_base[n.name]?s=t.rc_base[n.name].replace(i,"$1"+r+"$2"):s.match(i)&&(t.rc_base[n.name]=s,s=s.replace(i,"$1"+r+"$2")),n.value!==s&&(n.value=s,this.model.parseAttribute(t,n.name),this.model.applyAttribute(t,n.name));for(Object.keys(t.rc_base).length||delete t.rc_base,o=t.childNodes,a=0;a<o.length;a++)(n=o[a])instanceof Comment||n instanceof HTMLBRElement||n instanceof HTMLScriptElement||this.dealias(n,e,r)}},rc.attributes["b-base"]=rc.AttributeBase,rc.AttributeFor=class extends rc.Attribute{constructor(t,e,r){let s=t.attributes[e],i=s.value.match(/^{{([a-z0-9_]+)\s+in\s+(.*?)(\s+key\s+([a-z0-9_]+))?}}$/im);s.value="{{"+i[2]+"}}",super(t,e,r),this.alias=i[1],this.key=i[4],this.template=t.children[0],t.innerHTML=""}apply(){let t,e,r,s=[],i=this.property(this.model),a=this.eval(this.model);for(t in a)e=void 0!==this.key?a[t][this.key]:t,(r=this.node.querySelector('[b-key="'+e+'"]'))&&r.rc_index!==t&&(r.remove(),r=null),r||((r=this.template.cloneNode(!0)).rc_index=t,r.setAttribute("b-key",e),this.dealias(r,"\\$index",t),this.dealias(r,"\\$key",e),this.dealias(r,this.alias,i+"."+t),this.node.appendChild(r),this.model.parseNode(r));for(t=0;t<this.node.childNodes.length;t++)r=this.node.childNodes[t],void 0!==a&&void 0!==a[r.rc_index]||s.push(r);for(t in s)this.model.unlink(s[t]),s[t].remove()}dealias(t,e,r){let s=new RegExp("(^|[^a-z])"+e.replace(/\./g,"\\.")+"([^a-z]|$)","gim"),i=new RegExp("{{");if(t instanceof Text)return void(t.nodeValue.match(s)&&(t.nodeValue=t.nodeValue.replace(s,"$1"+r+"$2")));let a,n,o=t.attributes;for(a=0;a<o.length;a++)n=o[a],(rc.attributes[n.name]||n.value.match(i))&&n.value.match(s)&&(n.value=n.value.replace(s,"$1"+r+"$2"));for(o=t.childNodes,a=0;a<o.length;a++)(n=o[a])instanceof Comment||n instanceof HTMLBRElement||n instanceof HTMLScriptElement||this.dealias(n,e,r)}},rc.AttributeFor.priority=99,rc.attributes["b-for"]=rc.AttributeFor,rc.AttributeHideShow=class extends rc.Attribute{constructor(t,e,r){super(t,e,r),this.type=e}apply(){"b-hide"==this.type&&!this.eval(this.model)||"b-show"==this.type&&this.eval(this.model)?this.node.style.display="":this.node.style.display="none"}},rc.attributes["b-hide"]=rc.AttributeHideShow,rc.attributes["b-show"]=rc.AttributeHideShow,rc.AttributeModel=class extends rc.Attribute{constructor(t,e,r){super(t,e,r)}apply(){let t=this.eval(this.model);t=void 0!==t?"object"!=typeof t?t.toString():JSON.stringify(t):"",this.node instanceof HTMLInputElement||this.node instanceof HTMLButtonElement||this.node instanceof HTMLTextAreaElement||this.node instanceof HTMLSelectElement?this.node.value!=t&&(this.node.value=t):this.node.textContent!=t&&(this.node.textContent=t)}get(){let t=this.eval(this.model);return void 0!==t?t:""}set(t){this.model.set(this.property(this.model),t)}},rc.attributes["b-model"]=rc.AttributeModel,rc.Model=class{constructor(t,e,r){r={init:!0,...r},rc.models.push(this),this.proxyHandler=new rc.ModelProxyHandler(this),this.shadow={...e,strings:rc.strings},this.proxy=new Proxy({$:""},this.proxyHandler),this.listeners={get:{},set:{},delete:{}},this.links={},this.selector=new rc.Selector(t),r.init&&this.init()}get data(){return this.proxy}set data(t){t.strings=rc.strings,this.shadow=t;for(let t in this.selector)this.parseNode(this.selector.get(t),"")}get(t){return this.data.getProperty(t)}set(t,e){this.data.setProperty(t,e)}init(){let t,e;for(t in this.selector)(e=this.selector.get(t)).addEventListener("input",rc.Model.eventHander,!0),this.parseNode(e)}addListener(t,e,r){this.listeners[t]&&(this.listeners[t][e]||(this.listeners[t][e]=new Set),this.listeners[t][e].add(r))}removeListener(t,e,r){this.listeners[t]&&this.listeners[t][e]&&(this.listeners[t][e].delete(r),this.listeners[t][e].size||delete this.listeners[t][e])}applyAttributes(t){if(void 0===t.rc_attributes)return;if(t instanceof Text){let e=t.rc_attributes[""].eval(this);return e=void 0!==e?e.toString():"",void(t.nodeValue!==e&&(t.nodeValue=e))}let e;for(e in t.rc_attributes)this.applyAttribute(t,e)}applyAttribute(t,e){void 0!==t.rc_attributes&&void 0!==t.rc_attributes[e]&&t.rc_attributes[e].apply()}getNodes(t){let e,r,s=new Set;for(e in this.links)if(e.startsWith(t+"."))for(r of this.links[e])s.add(r);for(;""!=t;){if(void 0!==this.links[t])for(r of this.links[t])s.add(r);t=t.split(".").slice(0,-1).join(".")}return s}parseNode(t){if(this.parseAttributes(t),t instanceof Text)return void this.applyAttributes(t);let e,r,s=t.childNodes;for(e=0;e<s.length;e++)(r=s[e])instanceof Comment||r instanceof HTMLBRElement||r instanceof HTMLScriptElement||this.parseNode(r);this.applyAttributes(t)}parseAttributes(t){if(t instanceof Text)return void(-1!==t.nodeValue.indexOf("{{")?(t.rc_attributes={"":new rc.Expression(t.nodeValue)},this.updateLinks(t)):void 0===t.rc_attributes&&delete t.rc_attributes);let e,r,s=rc.getAttributes();for(e in s)this.parseAttribute(t,s[e].name);for(e=0;e<t.attributes.length;e++)r=t.attributes[e],void 0===rc.attributes[r.name]&&this.parseAttribute(t,r.name);t.rc_attributes&&this.updateLinks(t)}parseAttribute(t,e){let r,s=t.attributes[e];if(s){if(t.rc_attributes&&t.rc_attributes[e]){if("{{"+t.rc_attributes[e].expression+"}}"===s.value)return}if(rc.attributes[e])r=rc.attributes[e].check(t,e),s.value!==r&&(s.value=r),s=new rc.attributes[e](t,e,this);else{if(-1===s.value.indexOf("{{"))return;void 0===rc.attributes[e]&&(s=new rc.Attribute(t,e,this))}void 0===t.rc_attributes&&(t.rc_attributes={}),t.rc_attributes[e]=s}else t.rc_attributes&&delete t.rc_attributes[e]}updateLinks(t){var e,r,s,i=new Set;for(e in t.rc_attributes)for(r in s=t.rc_attributes[e].getLinks())i.add(s[r]);for(e of s=t.rc_links||new Set)i.has(e)||this.unlink(t,e);for(e of i)s.has(e)||this.link(t,e)}link(t,e){void 0===this.links[e]&&(this.links[e]=new Set),this.links[e].add(t),void 0===t.rc_links&&(t.rc_links=new Set),t.rc_links.add(e)}unlink(t,e){if(void 0===e){if(void 0!==t.rc_links)for(let e of t.rc_links)this.unlink(t,e);let e,r=t.childNodes;for(e=0;e<r.length;e++)this.unlink(r[e])}else void 0!==this.links[e]&&(this.links[e].delete(t),0===this.links[e].size&&delete this.links[e]),void 0!==t.rc_links&&(t.rc_links.delete(e),0===t.rc_links.size&&delete t.rc_links)}},rc.Model.eventHander=(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLButtonElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement))return;if(void 0===t.target.rc_attributes||void 0===t.target.rc_attributes["b-model"])return;let e=t.target.rc_attributes["b-model"],r=e.get(),s=t.target.value;r!==s&&e.set(s)}),rc.ModelProxyHandler=class{constructor(t){this.model=t}deleteProperty(t,e){let r=this.model.shadow.getProperty(t.$),s=this.model.listeners.delete[t.$];if(s)for(let i of s)i(r,t.$,e);delete r[e];let i,a=(t.$?t.$+".":"")+e,n=this.model.getNodes(a);for(i of n)this.model.applyAttributes(i,a);return!0}get(t,e){if("constructor"===e)return{name:"Proxy"};let r=this.model.shadow.getProperty(t.$);switch(e){case"keys":return Object.keys(r);case"length":return Object.keys(r).length;case"toJSON":return()=>r;case"clone":return()=>({...r})}let s=this.model.listeners.get[t.$];if(s)for(let i of s)i(r,t.$,e);if(void 0!==r[e]&&null!==r[e])switch(typeof r[e]){case"object":return new Proxy({$:(t.$?t.$+".":"")+e},this.model.proxyHandler);default:return r[e]}}getPrototypeOf(t){return this.model.shadow.getProperty(t.$)}has(t,e){let r=this.model.shadow.getProperty(t.$);return Reflect.has(r,e)}isExtensible(t){let e=this.model.shadow.getProperty(t.$);return Reflect.isExtensible(e)}ownKeys(t){let e=this.model.shadow.getProperty(t.$);return Object.keys(e)}set(t,e,r){let s=this.model.shadow.getProperty(t.$),i=this.model.listeners.set[t.$];if("Proxy"===r.constructor.name&&(r=r.clone()),i)for(let a of i)a(s,t.$,e,r);if(s[e]!==r){s[e]=r;let i,a=(t.$?t.$+".":"")+e,n=this.model.getNodes(a);for(i of n)this.model.applyAttributes(i,a)}return!0}},rc.Resource=class{constructor(t,e){this.url=t,this.type=e||"json"}get(t){return this.method("get",t)}post(t){return this.method("post",t)}put(t){return this.method("put",t)}delete(t){return this.method("delete",t)}method(t,e,r){"Proxy"===(e=e||{}).constructor.name&&(e=e.clone());let s=this.url.replace(/\/:([-_0-9a-z]+)(\/|$)/gi,(t,r,s)=>{let i=e[r]||"";return delete e[r],"/"+i+s}),i={mode:"cors",method:t,headers:new Headers(r||rc.Resource.headers)};switch(t){case"get":case"delete":let r,a=[];for(r in e)a.push(r+"="+encodeURIComponent(e[r]));s+="?"+a.join("&");break;case"post":case"put":i.body=JSON.stringify(e)}return-1!==["post","put"].indexOf(t)&&(i.body=JSON.stringify(e)),fetch(s,i).then(t=>{switch(this.ok=t.ok,this.status=t.status,this.type){case"json":return t.json();case"form":return t.formData();default:return t.text()}}).then(t=>{if(!this.ok){let e=new Error;throw e.status=this.status,e.data=t,e}return t})}},rc.Resource.headers={},rc.Router=class{constructor(t){rc.routers.push(this),this.routes={},this.selector=t,this.init()}init(){let t,e;for(t in this.selector)(e=this.selector.get(t)).addEventListener("click",rc.Router.eventHander,!0)}add(t,e,r){t=this.normalize(t),this.routes[t]={parts:t.split("/"),callback:e,params:r||{}}}remove(t){t=this.normalize(t),delete this.routes[t]}trigger(t,e){void 0===t&&(t=location.pathname),this.handle(t,e)}handle(t,e){if(t=this.normalize(t),void 0!==this.routes[t])return e&&window.history.pushState({},"","/"+t),this.routes[t].callback(this.routes[t].params),!0;let r,s,i,a,n=Object.assign({},this.routes),o={},l=t.split("/");for(r in l)for(s in a=l[r],n)n[s].parts.length===l.length?(i=n[s].parts[r])!==a&&(void 0!==i&&":"===i[0]?o[i.substr(1)]=a:delete n[s]):delete n[s];if(Object.keys(n).length)for(s in e&&window.history.pushState({},"","/"+t),n)n[s].callback(Object.assign(n[s].params,o));return Object.keys(n).length>0}normalize(t){return t.startsWith(location.origin)&&(t=t.substr(location.origin.length)),t.startsWith("//"+location.host)&&(t=t.substr(("//"+location.host).length)),t.startsWith("/")&&(t=t.substr(1)),t.endsWith("/")&&(t=t.substr(0,t.length-1)),t}},rc.Router.eventHander=(t=>{let e=t.target;for(;!(e instanceof HTMLAnchorElement);)if((e=e.parentNode)instanceof HTMLDocument)return;let r=rc.getRouter(e);if(!r)return;let s=e.getAttribute("href");s&&r.handle(s,!0)&&t.preventDefault()}),rc.Selector=class extends Array{constructor(t,e){if(super(),void 0!==t)switch(t.constructor.name){case"String":t.length>0&&this.push(...document.querySelectorAll(t));break;case"Array":this.push(...t);break;default:t instanceof HTMLElement&&this.push(t)}Object.defineProperty(this,"selector",{enumerable:!1,writable:!0}),this.selector=e}addClass(t){return this.classes("add",t)}attr(t,e){return this.forEach({action:"attr",name:t,value:e})}closest(t){return this.forEach({action:"closest",selector:t})}contains(t){return this.forEach({action:"contains",node:t})}end(){return this.selector}find(t){return this.forEach({action:"find",selector:t})}get(t){return this[t]}hasClass(t,e){return this.forEach({action:"hasClass",class:t,all:e})}html(t){return this.forEach({action:"html",value:t})}is(t,e){return this.forEach({action:"is",selector:t,all:e})}parent(){return this.forEach({action:"parent"})}removeClass(t){return this.classes("remove",t)}text(t){return this.forEach({action:"text",value:t})}toggleClass(t,e){return this.classes("toggle",t)}val(t){return this.forEach({action:"val",value:t})}classes(t,e,r){"string"==typeof e&&(e=e.split(" "));for(let s in this)for(let i in e)"toggle"===t?this[s].classList.toggle(e[i],r):this[s].classList[t](e[i]);return this}forEach(t){if(void 0!==t.value){for(let e in this)switch(t.action){case"attr":this[e].setAttribute(t.name,t.value);break;case"html":this[e].innerHTML=t.value;break;case"text":this[e].textContent=t.value;break;case"val":this[e]instanceof HTMLInputElement&&(this[e].value=t.value)}return this}if(0===this.length)return;let e,r,s=[];for(e in this)switch(t.action){case"attr":r=this[e].getAttribute(t.name),s.push(null!==r?r:void 0);break;case"closest":for(r=this[e].parentNode;!r.matches(t.selector);)if((r=r.parentNode)instanceof HTMLDocument){r=null;break}s.push(r);break;case"contains":if(this[e]===t.node||this[e].contains(t.node))return!0;break;case"find":s.push(...this[e].querySelectorAll(t.selector));break;case"html":s.push(this[e].innerHTML);break;case"hasClass":if(r=this[e].classList.contains(t.class),!0!==t.all){if(r)return!0}else if(!r)return!1;break;case"is":if(r=this[e].matches(t.selector),!0!==t.all){if(r)return!0}else if(!r)return!1;break;case"parent":s.push(this[e].parentNode);break;case"text":s.push(this[e].textContent);break;case"val":s.push(this[e]instanceof HTMLInputElement?this[e].value:void 0)}switch(t.action){case"contains":return!1;case"closest":case"find":case"parent":return new rc.Selector(s,this);case"hasClass":case"is":return!0===t.all;default:return s.length>1?s:s[0]}}};